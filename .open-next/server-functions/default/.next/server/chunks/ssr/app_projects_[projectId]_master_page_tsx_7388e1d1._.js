module.exports=[27,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(19721),e=a.i(50944),f=a.i(7291),g=a.i(54419),h=a.i(58042),i=a.i(94222),j=a.i(59854),k=a.i(2274),l=a.i(57431),m=a.i(77924),n=a.i(48662),o=a.i(554),p=a.i(77071),q=a.i(28792),r=a.i(80032),s=a.i(27622),t=a.i(77368),u=a.i(30159);function v(a){var b=(0,t.useAppDispatch)();return(0,c.useEffect)(()=>{b((0,u.updatePolarOptions)(a))},[b,a]),null}var w=a.i(46364),x=a.i(87293),y=["layout"];function z(){return(z=Object.assign.bind()).apply(null,arguments)}var A={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},B=(0,c.forwardRef)(function(a,b){var d,e=(0,x.resolveDefaultProps)(a.categoricalChartProps,A),{layout:f}=e,g=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(e,y),{chartName:h,defaultTooltipEventType:i,validateTooltipEventTypes:j,tooltipPayloadSearcher:k}=a;return c.createElement(p.RechartsStoreProvider,{preloadedState:{options:{chartName:h,defaultTooltipEventType:i,validateTooltipEventTypes:j,tooltipPayloadSearcher:k,eventEmitter:void 0}},reduxStoreName:null!=(d=e.id)?d:h},c.createElement(q.ChartDataContextProvider,{chartData:e.data}),c.createElement(r.ReportMainChartProps,{layout:f,margin:e.margin}),c.createElement(s.ReportChartProps,{baseValue:void 0,accessibilityLayer:e.accessibilityLayer,barCategoryGap:e.barCategoryGap,maxBarSize:e.maxBarSize,stackOffset:e.stackOffset,barGap:e.barGap,barSize:e.barSize,syncId:e.syncId,syncMethod:e.syncMethod,className:e.className,reverseStackOrder:e.reverseStackOrder}),c.createElement(v,{cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius}),c.createElement(w.CategoricalChart,z({},g,{ref:b})))});function C(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function D(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?C(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):C(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}var E=["item"],F=D(D({},A),{},{layout:"centric",startAngle:0,endAngle:360}),G=(0,c.forwardRef)((a,b)=>{var d=(0,x.resolveDefaultProps)(a,F);return c.createElement(B,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:E,tooltipPayloadSearcher:o.arrayTooltipSearcher,categoricalChartProps:d,ref:b})}),H=a.i(88804),I=a.i(98621),J=a.i(44381),K=a.i(98563),L=a.i(1351),M=a.i(56295),N=a.i(12168),O=a.i(98382),P=a.i(44407),Q=a.i(41386),R=a.i(51434),S=a=>a.graphicalItems.polarItems,T=(0,J.createSelector)([P.pickAxisType,Q.pickAxisId],N.itemAxisPredicate),U=(0,J.createSelector)([S,N.selectBaseAxis,T],N.combineGraphicalItemsSettings),V=(0,J.createSelector)([U],N.combineGraphicalItemsData),W=(0,J.createSelector)([V,K.selectChartDataAndAlwaysIgnoreIndexes],N.combineDisplayedData),X=(0,J.createSelector)([W,N.selectBaseAxis,U],N.combineAppliedValues);(0,J.createSelector)([W,N.selectBaseAxis,U],(a,b,c)=>c.length>0?a.flatMap(a=>c.flatMap(c=>{var d;return{value:(0,M.getValueByDataKey)(a,null!=(d=b.dataKey)?d:c.dataKey),errorDomain:[]}})).filter(Boolean):(null==b?void 0:b.dataKey)!=null?a.map(a=>({value:(0,M.getValueByDataKey)(a,b.dataKey),errorDomain:[]})):a.map(a=>({value:a,errorDomain:[]})));var Y=()=>void 0,Z=(0,J.createSelector)([W,N.selectBaseAxis,U,N.selectAllErrorBarSettings,P.pickAxisType],N.combineDomainOfAllAppliedNumericalValuesIncludingErrorValues),$=(0,J.createSelector)([N.selectBaseAxis,N.selectDomainDefinition,N.selectDomainFromUserPreference,Y,Z,Y,O.selectChartLayout,P.pickAxisType],N.combineNumericalDomain),_=(0,J.createSelector)([N.selectBaseAxis,O.selectChartLayout,W,X,R.selectStackOffsetType,P.pickAxisType,$],N.combineAxisDomain),aa=(0,J.createSelector)([_,N.selectBaseAxis,N.selectRealScaleType],N.combineNiceTicks);function ab(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function ac(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?ab(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):ab(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}(0,J.createSelector)([N.selectBaseAxis,_,aa,P.pickAxisType],N.combineAxisDomainWithNiceTicks);var ad=(0,J.createSelector)([S,(a,b)=>b],(a,b)=>a.filter(a=>"pie"===a.type).find(a=>a.id===b)),ae=[],af=(a,b,c)=>(null==c?void 0:c.length)===0?ae:c,ag=(0,J.createSelector)([K.selectChartDataAndAlwaysIgnoreIndexes,ad,af],(a,b,c)=>{var d,{chartData:e}=a;if(null!=b&&((d=(null==b?void 0:b.data)!=null&&b.data.length>0?b.data:e)&&d.length||null==c||(d=c.map(a=>ac(ac({},b.presentationProps),a.props))),null!=d))return d}),ah=(0,J.createSelector)([ag,ad,af],(a,b,c)=>{if(null!=a&&null!=b)return a.map((a,d)=>{var e,f,g=(0,M.getValueByDataKey)(a,b.nameKey,b.name);return f=null!=c&&null!=(e=c[d])&&null!=(e=e.props)&&e.fill?c[d].props.fill:"object"==typeof a&&null!=a&&"fill"in a?a.fill:b.fill,{value:(0,M.getTooltipNameProp)(g,b.dataKey),color:f,payload:a,type:b.legendType}})}),ai=(0,J.createSelector)([ag,ad,af,L.selectChartOffsetInternal],(a,b,c,d)=>{if(null!=b&&null!=a)return function(a){var b,c,d,{pieSettings:e,displayedData:f,cells:g,offset:h}=a,{cornerRadius:i,startAngle:j,endAngle:k,dataKey:l,nameKey:m,tooltipType:n}=e,o=Math.abs(e.minAngle),p=(0,ap.mathSign)(k-j)*Math.min(Math.abs(k-j),360),q=Math.abs(p),r=f.length<=1?0:null!=(b=e.paddingAngle)?b:0,s=f.filter(a=>0!==(0,M.getValueByDataKey)(a,l,0)).length,t=q-s*o-(q>=360?s:s-1)*r,u=f.reduce((a,b)=>{var c=(0,M.getValueByDataKey)(b,l,0);return a+((0,ap.isNumber)(c)?c:0)},0);return u>0&&(c=f.map((a,b)=>{var c,f=(0,M.getValueByDataKey)(a,l,0),k=(0,M.getValueByDataKey)(a,m,b),q=((a,b,c)=>{var d,{top:e,left:f,width:g,height:h}=b,i=(0,ao.getMaxRadius)(g,h),j=f+(0,ap.getPercentValue)(a.cx,g,g/2),k=e+(0,ap.getPercentValue)(a.cy,h,h/2),l=(0,ap.getPercentValue)(a.innerRadius,i,0);return{cx:j,cy:k,innerRadius:l,outerRadius:(d=a.outerRadius,"function"==typeof d?(0,ap.getPercentValue)(d(c),i,.8*i):(0,ap.getPercentValue)(d,i,.8*i)),maxRadius:a.maxRadius||Math.sqrt(g*g+h*h)/2}})(e,h,a),s=((0,ap.isNumber)(f)?f:0)/u,v=aK(aK({},a),g&&g[b]&&g[b].props),w=(c=b?d.endAngle+(0,ap.mathSign)(p)*r*(0!==f):j)+(0,ap.mathSign)(p)*((0!==f?o:0)+s*t),x=(c+w)/2,y=(q.innerRadius+q.outerRadius)/2,z=[{name:k,value:f,payload:v,dataKey:l,type:n,graphicalItemId:e.id}],A=(0,ao.polarToCartesian)(q.cx,q.cy,y,x);return d=aK(aK(aK(aK({},e.presentationProps),{},{percent:s,cornerRadius:"string"==typeof i?parseFloat(i):i,name:k,tooltipPayload:z,midAngle:x,middleRadius:y,tooltipPosition:A},v),q),{},{value:f,dataKey:l,startAngle:c,endAngle:w,payload:v,paddingAngle:(0,ap.mathSign)(p)*r})})),c}({offset:d,pieSettings:b,displayedData:a,cells:c})}),aj=a.i(88949),ak=a.i(13667),al=a.i(20299),am=a.i(67149),an=a.i(37082),ao=a.i(30261),ap=a.i(68932),aq=a.i(52517),ar=a.i(56998),as=a.i(89205),at=a.i(12791),au=a.i(86505),av=a.i(92430),aw=a.i(5911),ax=a.i(62320),ay=a.i(46780),az=a.i(77025),aA=a.i(72853),aB=a.i(76342),aC=a.i(36319),aD=a.i(96268),aE=a.i(31080),aF=["key"],aG=["onMouseEnter","onClick","onMouseLeave"],aH=["id"],aI=["id"];function aJ(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function aK(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?aJ(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):aJ(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function aL(){return(aL=Object.assign.bind()).apply(null,arguments)}function aM(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function aN(a){var b=(0,c.useMemo)(()=>(0,an.findAllByType)(a.children,am.Cell),[a.children]),d=(0,t.useAppSelector)(c=>ah(c,a.id,b));return null==d?null:c.createElement(av.SetPolarLegendPayload,{legendPayload:d})}var aO=c.memo(a=>{var{dataKey:b,nameKey:d,sectors:e,stroke:f,strokeWidth:g,fill:h,name:i,hide:j,tooltipType:k,id:l}=a,m={dataDefinedOnItem:e.map(a=>a.tooltipPayload),positions:e.map(a=>a.tooltipPosition),settings:{stroke:f,strokeWidth:g,fill:h,dataKey:b,nameKey:d,name:(0,M.getTooltipNameProp)(i,b),hide:j,type:k,color:h,unit:"",graphicalItemId:l}};return c.createElement(at.SetTooltipEntrySettings,{tooltipEntrySettings:m})});function aP(a){var{sectors:b,props:d,showLabels:e}=a,{label:f,labelLine:g,dataKey:h}=d;if(!e||!f||!b)return null;var i=(0,aA.svgPropertiesNoEvents)(d),j=(0,aA.svgPropertiesNoEventsFromUnknown)(f),k=(0,aA.svgPropertiesNoEventsFromUnknown)(g),l="object"==typeof f&&"offsetRadius"in f&&"number"==typeof f.offsetRadius&&f.offsetRadius||20,m=b.map((a,b)=>{var d,e,m=(a.startAngle+a.endAngle)/2,n=(0,ao.polarToCartesian)(a.cx,a.cy,a.outerRadius+l,m),o=aK(aK(aK(aK({},i),a),{},{stroke:"none"},j),{},{index:b,textAnchor:(d=n.x)>(e=a.cx)?"start":d<e?"end":"middle"},n),p=aK(aK(aK(aK({},i),a),{},{fill:"none",stroke:a.fill},k),{},{index:b,points:[(0,ao.polarToCartesian)(a.cx,a.cy,a.outerRadius,m),n],key:"line"});return c.createElement(aD.ZIndexLayer,{zIndex:aE.DefaultZIndexes.label,key:"label-".concat(a.startAngle,"-").concat(a.endAngle,"-").concat(a.midAngle,"-").concat(b)},c.createElement(aj.Layer,null,g&&((a,b)=>{if(c.isValidElement(a))return c.cloneElement(a,b);if("function"==typeof a)return a(b);var d=(0,I.clsx)("recharts-pie-label-line","boolean"!=typeof a?a.className:""),{key:e}=b,f=aM(b,aF);return c.createElement(ak.Curve,aL({},f,{type:"linear",className:d}))})(g,p),((a,b,d)=>{if(c.isValidElement(a))return c.cloneElement(a,b);var e=d;if("function"==typeof a&&(e=a(b),c.isValidElement(e)))return e;var f=(0,I.clsx)("recharts-pie-label-text",a&&"object"==typeof a&&"className"in a&&"string"==typeof a.className?a.className:"");return c.createElement(al.Text,aL({},b,{alignmentBaseline:"middle",className:f}),e)})(f,o,(0,M.getValueByDataKey)(a,h))))});return c.createElement(aj.Layer,{className:"recharts-pie-labels"},m)}function aQ(a){var{sectors:b,props:d,showLabels:e}=a,{label:f}=d;return"object"==typeof f&&null!=f&&"position"in f?c.createElement(aC.LabelListFromLabelProp,{label:f}):c.createElement(aP,{sectors:b,props:d,showLabels:e})}function aR(a){var{sectors:b,activeShape:d,inactiveShape:e,allOtherPieProps:f,shape:g,id:h}=a,i=(0,t.useAppSelector)(au.selectActiveTooltipIndex),j=(0,t.useAppSelector)(au.selectActiveTooltipDataKey),k=(0,t.useAppSelector)(au.selectActiveTooltipGraphicalItemId),{onMouseEnter:l,onClick:m,onMouseLeave:n}=f,o=aM(f,aG),p=(0,as.useMouseEnterItemDispatch)(l,f.dataKey,h),q=(0,as.useMouseLeaveItemDispatch)(n),r=(0,as.useMouseClickItemDispatch)(m,f.dataKey,h);return null==b||0===b.length?null:c.createElement(c.Fragment,null,b.map((a,l)=>{if((null==a?void 0:a.startAngle)===0&&(null==a?void 0:a.endAngle)===0&&1!==b.length)return null;var m=null==k||k===h,n=String(l)===i&&(null==j||f.dataKey===j)&&m,s=d&&n?d:i?e:null,t=aK(aK({},a),{},{stroke:a.stroke,tabIndex:-1,[aw.DATA_ITEM_INDEX_ATTRIBUTE_NAME]:l,[aw.DATA_ITEM_GRAPHICAL_ITEM_ID_ATTRIBUTE_NAME]:h});return c.createElement(aj.Layer,aL({key:"sector-".concat(null==a?void 0:a.startAngle,"-").concat(null==a?void 0:a.endAngle,"-").concat(a.midAngle,"-").concat(l),tabIndex:-1,className:"recharts-pie-sector"},(0,aq.adaptEventsOfChild)(o,a,l),{onMouseEnter:p(a,l),onMouseLeave:q(a,l),onClick:r(a,l)}),c.createElement(ar.Shape,aL({option:null!=g?g:s,index:l,shapeType:"sector",isActive:n},t)))}))}function aS(a){var{showLabels:b,sectors:d,children:e}=a,f=(0,c.useMemo)(()=>b&&d?d.map(a=>({value:a.value,payload:a.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:a.cx,cy:a.cy,innerRadius:a.innerRadius,outerRadius:a.outerRadius,startAngle:a.startAngle,endAngle:a.endAngle,clockWise:!1},fill:a.fill})):[],[d,b]);return c.createElement(aC.PolarLabelListContextProvider,{value:b?f:void 0},e)}function aT(a){var{props:b,previousSectorsRef:d,id:e}=a,{sectors:f,isAnimationActive:g,animationBegin:h,animationDuration:i,animationEasing:j,activeShape:k,inactiveShape:l,onAnimationStart:m,onAnimationEnd:n}=b,o=(0,ax.useAnimationId)(b,"recharts-pie-"),p=d.current,[q,r]=(0,c.useState)(!1),s=(0,c.useCallback)(()=>{"function"==typeof n&&n(),r(!1)},[n]),t=(0,c.useCallback)(()=>{"function"==typeof m&&m(),r(!0)},[m]);return c.createElement(aS,{showLabels:!q,sectors:f},c.createElement(aB.JavascriptAnimate,{animationId:o,begin:h,duration:i,isActive:g,easing:j,onAnimationStart:t,onAnimationEnd:s,key:o},a=>{var g=[],h=f&&f[0],i=null==h?void 0:h.startAngle;return null==f||f.forEach((b,c)=>{var d=p&&p[c],e=c>0?(0,H.default)(b,"paddingAngle",0):0;if(d){var f=(0,ap.interpolate)(d.endAngle-d.startAngle,b.endAngle-b.startAngle,a),h=aK(aK({},b),{},{startAngle:i+e,endAngle:i+f+e});g.push(h),i=h.endAngle}else{var{endAngle:j,startAngle:k}=b,l=(0,ap.interpolate)(0,j-k,a),m=aK(aK({},b),{},{startAngle:i+e,endAngle:i+l+e});g.push(m),i=m.endAngle}}),d.current=g,c.createElement(aj.Layer,null,c.createElement(aR,{sectors:g,activeShape:k,inactiveShape:l,allOtherPieProps:b,shape:b.shape,id:e}))}),c.createElement(aQ,{showLabels:!q,sectors:f,props:b}),b.children)}var aU={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:aE.DefaultZIndexes.area};function aV(a){var{id:b}=a,d=aM(a,aH),{hide:e,className:f,rootTabIndex:g}=a,h=(0,c.useMemo)(()=>(0,an.findAllByType)(a.children,am.Cell),[a.children]),i=(0,t.useAppSelector)(a=>ai(a,b,h)),j=(0,c.useRef)(null),k=(0,I.clsx)("recharts-pie",f);return e||null==i?(j.current=null,c.createElement(aj.Layer,{tabIndex:g,className:k})):c.createElement(aD.ZIndexLayer,{zIndex:a.zIndex},c.createElement(aO,{dataKey:a.dataKey,nameKey:a.nameKey,sectors:i,stroke:a.stroke,strokeWidth:a.strokeWidth,fill:a.fill,name:a.name,hide:a.hide,tooltipType:a.tooltipType,id:b}),c.createElement(aj.Layer,{tabIndex:g,className:k},c.createElement(aT,{props:aK(aK({},d),{},{sectors:i}),previousSectorsRef:j,id:b})))}function aW(a){var b=(0,x.resolveDefaultProps)(a,aU),{id:d}=b,e=aM(b,aI),f=(0,aA.svgPropertiesNoEvents)(e);return c.createElement(ay.RegisterGraphicalItemId,{id:d,type:"pie"},a=>c.createElement(c.Fragment,null,c.createElement(az.SetPolarGraphicalItem,{type:"pie",id:a,data:e.data,dataKey:e.dataKey,hide:e.hide,angleAxisId:0,radiusAxisId:0,name:e.name,nameKey:e.nameKey,tooltipType:e.tooltipType,legendType:e.legendType,fill:e.fill,cx:e.cx,cy:e.cy,startAngle:e.startAngle,endAngle:e.endAngle,paddingAngle:e.paddingAngle,minAngle:e.minAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,cornerRadius:e.cornerRadius,presentationProps:f,maxRadius:b.maxRadius}),c.createElement(aN,aL({},e,{id:a})),c.createElement(aV,aL({},e,{id:a}))))}aW.displayName="Pie";var aX=c,aY=a.i(71555),aZ=a.i(2321),a$=a.i(53242),a_=a.i(17913),a0=a.i(89702),a1=a.i(94303),a2=(a,b,c)=>(0,N.selectAxisWithScale)(a,"xAxis",(0,a1.selectXAxisIdFromGraphicalItemId)(a,b),c),a3=(a,b,c)=>(0,N.selectTicksOfGraphicalItem)(a,"xAxis",(0,a1.selectXAxisIdFromGraphicalItemId)(a,b),c),a4=(a,b,c)=>(0,N.selectAxisWithScale)(a,"yAxis",(0,a1.selectYAxisIdFromGraphicalItemId)(a,b),c),a5=(a,b,c)=>(0,N.selectTicksOfGraphicalItem)(a,"yAxis",(0,a1.selectYAxisIdFromGraphicalItemId)(a,b),c),a6=(0,J.createSelector)([O.selectChartLayout,a2,a4,a3,a5],(a,b,c,d,e)=>(0,M.isCategoricalAxis)(a,"xAxis")?(0,M.getBandSizeOfAxis)(b,d,!1):(0,M.getBandSizeOfAxis)(c,e,!1)),a7=(0,J.createSelector)([N.selectUnfilteredCartesianItems,(a,b)=>b],(a,b)=>a.filter(a=>"area"===a.type).find(a=>a.id===b)),a8=a=>{var b=(0,O.selectChartLayout)(a);return(0,M.isCategoricalAxis)(b,"xAxis")?"yAxis":"xAxis"},a9=(0,J.createSelector)([a7,(a,b,c)=>(0,N.selectStackGroups)(a,a8(a),"yAxis"===a8(a)?(0,a1.selectYAxisIdFromGraphicalItemId)(a,b):(0,a1.selectXAxisIdFromGraphicalItemId)(a,b),c)],(a,b)=>{if(null!=a&&null!=b){var c,{stackId:d}=a,e=(0,a0.getStackSeriesIdentifier)(a);if(null!=d&&null!=e){var f=null==(c=b[d])?void 0:c.stackedData,g=null==f?void 0:f.find(a=>a.key===e);if(null!=g)return g.map(a=>[a[0],a[1]])}}}),ba=(0,J.createSelector)([O.selectChartLayout,a2,a4,a3,a5,a9,K.selectChartDataWithIndexesIfNotInPanoramaPosition3,a6,a7,R.selectChartBaseValue],(a,b,c,d,e,f,g,h,i,j)=>{var k,{chartData:l,dataStartIndex:m,dataEndIndex:n}=g;if(null!=i&&("horizontal"===a||"vertical"===a)&&null!=b&&null!=c&&null!=d&&null!=e&&0!==d.length&&0!==e.length&&null!=h){var{data:o}=i;if(null!=(k=o&&o.length>0?o:null==l?void 0:l.slice(m,n+1)))return function(a){var b,{areaSettings:{connectNulls:c,baseValue:d,dataKey:e},stackedData:f,layout:g,chartBaseValue:h,xAxis:i,yAxis:j,displayedData:k,dataStartIndex:l,xAxisTicks:m,yAxisTicks:n,bandSize:o}=a,p=f&&f.length,q=((a,b,c,d,e)=>{var f=null!=c?c:b;if((0,ap.isNumber)(f))return f;var g="horizontal"===a?e:d,h=g.scale.domain();if("number"===g.type){var i=Math.max(h[0],h[1]),j=Math.min(h[0],h[1]);return"dataMin"===f?j:"dataMax"===f||i<0?i:Math.max(Math.min(h[0],h[1]),0)}return"dataMin"===f?h[0]:"dataMax"===f?h[1]:h[0]})(g,h,d,i,j),r="horizontal"===g,s=!1,t=k.map((a,b)=>{if(p)h=f[l+b];else{var d,g,h,k=(0,M.getValueByDataKey)(a,e);Array.isArray(k)?(h=k,s=!0):h=[q,k]}var t=null!=(d=null==(g=h)?void 0:g[1])?d:null,u=null==t||p&&!c&&null==(0,M.getValueByDataKey)(a,e);return r?{x:(0,M.getCateCoordinateOfLine)({axis:i,ticks:m,bandSize:o,entry:a,index:b}),y:u?null:j.scale(t),value:h,payload:a}:{x:u?null:i.scale(t),y:(0,M.getCateCoordinateOfLine)({axis:j,ticks:n,bandSize:o,entry:a,index:b}),value:h,payload:a}});return b=p||s?t.map(a=>{var b=Array.isArray(a.value)?a.value[0]:null;return r?{x:a.x,y:null!=b&&null!=a.y?j.scale(b):null,payload:a.payload}:{x:null!=b?i.scale(b):null,y:a.y,payload:a.payload}}):r?j.scale(q):i.scale(q),{points:t,baseLine:b,isRange:s}}({layout:a,xAxis:b,yAxis:c,xAxisTicks:d,yAxisTicks:e,dataStartIndex:m,areaSettings:i,stackedData:f,displayedData:k,chartBaseValue:j,bandSize:h})}}),bb=a.i(25392),bc=a.i(72474),bd=a.i(3041),be=a.i(36745),bf=a.i(10576),bg=a.i(7038),bh=a.i(95272),bi=["id"],bj=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function bk(){return(bk=Object.assign.bind()).apply(null,arguments)}function bl(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(-1!==b.indexOf(d))continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],-1===b.indexOf(c)&&({}).propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function bm(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function bn(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?bm(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):bm(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function bo(a,b){return a&&"none"!==a?a:b}var bp=aX.memo(a=>{var{dataKey:b,data:c,stroke:d,strokeWidth:e,fill:f,name:g,hide:h,unit:i,tooltipType:j,id:k}=a,l={dataDefinedOnItem:c,positions:void 0,settings:{stroke:d,strokeWidth:e,fill:f,dataKey:b,nameKey:void 0,name:(0,M.getTooltipNameProp)(g,b),hide:h,type:j,color:bo(d,f),unit:i,graphicalItemId:k}};return aX.createElement(at.SetTooltipEntrySettings,{tooltipEntrySettings:l})});function bq(a){var{clipPathId:b,points:c,props:d}=a,{needClip:e,dot:f,dataKey:g}=d,h=(0,aA.svgPropertiesNoEvents)(d);return aX.createElement(aY.Dots,{points:c,dot:f,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:g,baseProps:h,needClip:e,clipPathId:b})}function br(a){var{showLabels:b,children:c,points:d}=a,e=d.map(a=>{var b,c,d={x:null!=(b=a.x)?b:0,y:null!=(c=a.y)?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return bn(bn({},d),{},{value:a.value,payload:a.payload,parentViewBox:void 0,viewBox:d,fill:void 0})});return aX.createElement(aC.CartesianLabelListContextProvider,{value:b?e:void 0},c)}function bs(a){var{points:b,baseLine:c,needClip:d,clipPathId:e,props:f}=a,{layout:g,type:h,stroke:i,connectNulls:j,isRange:k}=f,{id:l}=f,m=bl(f,bi),n=(0,aA.svgPropertiesNoEvents)(m),o=(0,bg.svgPropertiesAndEvents)(m);return aX.createElement(aX.Fragment,null,(null==b?void 0:b.length)>1&&aX.createElement(aj.Layer,{clipPath:d?"url(#clipPath-".concat(e,")"):void 0},aX.createElement(ak.Curve,bk({},o,{id:l,points:b,connectNulls:j,type:h,baseLine:c,layout:g,stroke:"none",className:"recharts-area-area"})),"none"!==i&&aX.createElement(ak.Curve,bk({},n,{className:"recharts-area-curve",layout:g,type:h,connectNulls:j,fill:"none",points:b})),"none"!==i&&k&&aX.createElement(ak.Curve,bk({},n,{className:"recharts-area-curve",layout:g,type:h,connectNulls:j,fill:"none",points:c}))),aX.createElement(bq,{points:b,props:m,clipPathId:e}))}function bt(a){var b,c,{alpha:d,baseLine:e,points:f,strokeWidth:g}=a,h=null==(b=f[0])?void 0:b.y,i=null==(c=f[f.length-1])?void 0:c.y;if(!(0,bd.isWellBehavedNumber)(h)||!(0,bd.isWellBehavedNumber)(i))return null;var j=d*Math.abs(h-i),k=Math.max(...f.map(a=>a.x||0));return((0,ap.isNumber)(e)?k=Math.max(e,k):e&&Array.isArray(e)&&e.length&&(k=Math.max(...e.map(a=>a.x||0),k)),(0,ap.isNumber)(k))?aX.createElement("rect",{x:0,y:h<i?h:h-j,width:k+(g?parseInt("".concat(g),10):1),height:Math.floor(j)}):null}function bu(a){var b,c,{alpha:d,baseLine:e,points:f,strokeWidth:g}=a,h=null==(b=f[0])?void 0:b.x,i=null==(c=f[f.length-1])?void 0:c.x;if(!(0,bd.isWellBehavedNumber)(h)||!(0,bd.isWellBehavedNumber)(i))return null;var j=d*Math.abs(h-i),k=Math.max(...f.map(a=>a.y||0));return((0,ap.isNumber)(e)?k=Math.max(e,k):e&&Array.isArray(e)&&e.length&&(k=Math.max(...e.map(a=>a.y||0),k)),(0,ap.isNumber)(k))?aX.createElement("rect",{x:h<i?h:h-j,y:0,width:j,height:Math.floor(k+(g?parseInt("".concat(g),10):1))}):null}function bv(a){var{alpha:b,layout:c,points:d,baseLine:e,strokeWidth:f}=a;return"vertical"===c?aX.createElement(bt,{alpha:b,points:d,baseLine:e,strokeWidth:f}):aX.createElement(bu,{alpha:b,points:d,baseLine:e,strokeWidth:f})}function bw(a){var{needClip:b,clipPathId:c,props:d,previousPointsRef:e,previousBaselineRef:f}=a,{points:g,baseLine:h,isAnimationActive:i,animationBegin:j,animationDuration:k,animationEasing:l,onAnimationStart:m,onAnimationEnd:n}=d,o=(0,aX.useMemo)(()=>({points:g,baseLine:h}),[g,h]),p=(0,ax.useAnimationId)(o,"recharts-area-"),q=(0,O.useCartesianChartLayout)(),[r,s]=(0,aX.useState)(!1),t=(0,aX.useCallback)(()=>{"function"==typeof n&&n(),s(!1)},[n]),u=(0,aX.useCallback)(()=>{"function"==typeof m&&m(),s(!0)},[m]);if(null==q)return null;var v=e.current,w=f.current;return aX.createElement(br,{showLabels:!r,points:g},d.children,aX.createElement(aB.JavascriptAnimate,{animationId:p,begin:j,duration:k,isActive:i,easing:l,onAnimationEnd:t,onAnimationStart:u,key:p},a=>{if(v){var j,k=v.length/g.length,l=1===a?g:g.map((b,c)=>{var d=Math.floor(c*k);if(v[d]){var e=v[d];return bn(bn({},b),{},{x:(0,ap.interpolate)(e.x,b.x,a),y:(0,ap.interpolate)(e.y,b.y,a)})}return b});return j=(0,ap.isNumber)(h)?(0,ap.interpolate)(w,h,a):(0,ap.isNullish)(h)||(0,ap.isNan)(h)?(0,ap.interpolate)(w,0,a):h.map((b,c)=>{var d=Math.floor(c*k);if(Array.isArray(w)&&w[d]){var e=w[d];return bn(bn({},b),{},{x:(0,ap.interpolate)(e.x,b.x,a),y:(0,ap.interpolate)(e.y,b.y,a)})}return b}),a>0&&(e.current=l,f.current=j),aX.createElement(bs,{points:l,baseLine:j,needClip:b,clipPathId:c,props:d})}return a>0&&(e.current=g,f.current=h),aX.createElement(aj.Layer,null,i&&aX.createElement("defs",null,aX.createElement("clipPath",{id:"animationClipPath-".concat(c)},aX.createElement(bv,{alpha:a,points:g,baseLine:h,layout:q,strokeWidth:d.strokeWidth}))),aX.createElement(aj.Layer,{clipPath:"url(#animationClipPath-".concat(c,")")},aX.createElement(bs,{points:g,baseLine:h,needClip:b,clipPathId:c,props:d})))}),aX.createElement(aC.LabelListFromLabelProp,{label:d.label}))}function bx(a){var{needClip:b,clipPathId:c,props:d}=a,e=(0,aX.useRef)(null),f=(0,aX.useRef)();return aX.createElement(bw,{needClip:b,clipPathId:c,props:d,previousPointsRef:e,previousBaselineRef:f})}class by extends aX.PureComponent{render(){var{hide:a,dot:b,points:c,className:d,top:e,left:f,needClip:g,xAxisId:h,yAxisId:i,width:j,height:k,id:l,baseLine:m,zIndex:n}=this.props;if(a)return null;var o=(0,I.clsx)("recharts-area",d),{r:p,strokeWidth:q}=(0,bf.getRadiusAndStrokeWidthFromDot)(b),r=(0,an.isClipDot)(b),s=2*p+q,t=g?"url(#clipPath-".concat(r?"":"dots-").concat(l,")"):void 0;return aX.createElement(aD.ZIndexLayer,{zIndex:n},aX.createElement(aj.Layer,{className:o},g&&aX.createElement("defs",null,aX.createElement(a_.GraphicalItemClipPath,{clipPathId:l,xAxisId:h,yAxisId:i}),!r&&aX.createElement("clipPath",{id:"clipPath-dots-".concat(l)},aX.createElement("rect",{x:f-s/2,y:e-s/2,width:j+s,height:k+s}))),aX.createElement(bx,{needClip:g,clipPathId:l,props:this.props})),aX.createElement(a$.ActivePoints,{points:c,mainColor:bo(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:t}),this.props.isRange&&Array.isArray(m)&&aX.createElement(a$.ActivePoints,{points:m,mainColor:bo(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:t}))}}var bz={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:aE.DefaultZIndexes.area};function bA(a){var b,c=(0,x.resolveDefaultProps)(a,bz),{activeDot:d,animationBegin:e,animationDuration:f,animationEasing:g,connectNulls:h,dot:i,fill:j,fillOpacity:k,hide:l,isAnimationActive:m,legendType:n,stroke:o,xAxisId:p,yAxisId:q}=c,r=bl(c,bj),s=(0,O.useChartLayout)(),u=(0,bc.useChartName)(),{needClip:v}=(0,a_.useNeedsClip)(p,q),w=(0,bb.useIsPanorama)(),{points:y,isRange:z,baseLine:A}=null!=(b=(0,t.useAppSelector)(b=>ba(b,a.id,w)))?b:{},B=(0,be.usePlotArea)();if("horizontal"!==s&&"vertical"!==s||null==B||"AreaChart"!==u&&"ComposedChart"!==u)return null;var{height:C,width:D,x:E,y:F}=B;return y&&y.length?aX.createElement(by,bk({},r,{activeDot:d,animationBegin:e,animationDuration:f,animationEasing:g,baseLine:A,connectNulls:h,dot:i,fill:j,fillOpacity:k,height:C,hide:l,layout:s,isAnimationActive:"auto"===m?!aZ.Global.isSsr:m,isRange:z,legendType:n,needClip:v,points:y,stroke:o,width:D,left:E,top:F,xAxisId:p,yAxisId:q})):null}var bB=aX.memo(function(a){var b=(0,x.resolveDefaultProps)(a,bz),c=(0,bb.useIsPanorama)();return aX.createElement(ay.RegisterGraphicalItemId,{id:b.id,type:"area"},a=>aX.createElement(aX.Fragment,null,aX.createElement(av.SetLegendPayload,{legendPayload:(a=>{var{dataKey:b,name:c,stroke:d,fill:e,legendType:f,hide:g}=a;return[{inactive:g,dataKey:b,type:f,color:bo(d,e),value:(0,M.getTooltipNameProp)(c,b),payload:a}]})(b)}),aX.createElement(bp,{dataKey:b.dataKey,data:b.data,stroke:b.stroke,strokeWidth:b.strokeWidth,fill:b.fill,name:b.name,hide:b.hide,unit:b.unit,tooltipType:b.tooltipType,id:a}),aX.createElement(az.SetCartesianGraphicalItem,{type:"area",id:a,data:b.data,dataKey:b.dataKey,xAxisId:b.xAxisId,yAxisId:b.yAxisId,zAxisId:0,stackId:(0,M.getNormalizedStackId)(b.stackId),hide:b.hide,barSize:void 0,baseValue:b.baseValue,isPanorama:c,connectNulls:b.connectNulls}),aX.createElement(bA,bk({},b,{id:a}))))},bh.propsAreEqual);bB.displayName="Area";let bC=(0,d.default)(async()=>{},{loadableGenerated:{modules:[5648]},ssr:!1});function bD(){let a,d=(0,e.useRouter)(),o=(0,e.useParams)(),p=o?.projectId,[q,r]=(0,c.useState)("Project"),[s,t]=(0,c.useState)([]),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)("overview"),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(null),[L,M]=(0,c.useState)([]),[N,O]=(0,c.useState)({}),[P,Q]=(0,c.useState)([]),[R,S]=(0,c.useState)(null),[T,U]=(0,c.useState)(null),[V,W]=(0,c.useState)(null),[X,Y]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{let{data:a}=await f.supabase.auth.getSession();if(!a?.session)return d.push("/");p&&(await _(),await aa(),D(!1))})()},[p,d]),(0,c.useEffect)(()=>{let a=localStorage.getItem("userEmail"),b=localStorage.getItem("userProfile"),c=localStorage.getItem("userRole");U(a),W(b),Y(c)},[]);let Z=a=>{if(null==a||""===a)return 0;"string"==typeof a&&(a=(a=a.replace(",",".")).replace(/[^\d.-]/g,""));let b=Number(a);return isNaN(b)?0:parseFloat(b.toFixed(2))},$=a=>{let b={},c=0;return L.forEach(d=>{let e=a.reduce((a,b)=>a+Z(b.dates?.[d]),0);c+=e,b[d]=c}),b},_=async()=>{if(!p)return;let{data:a,error:b}=await f.supabase.from("projects").select("name, meta, created_at, deadline").eq("id",p).single();a?r(a.name||`Project ${p}`):r(`Project ${p}`);let c=`silver:${p}:meta_project`,d=localStorage.getItem(c);if(d)try{let b=JSON.parse(d);b&&"object"==typeof b?O(b):a?.meta&&"object"==typeof a.meta&&O(a.meta)}catch(b){console.warn("invalid meta project:",b),a?.meta&&"object"==typeof a.meta&&O(a.meta)}else a?.meta&&"object"==typeof a.meta&&O(a.meta);let e=(await f.supabase.from("tasks").select("*").eq("project_id",p).order("row_index",{ascending:!0})).data||[];t(e);let g=`silver:${p}:date_cols`,h=localStorage.getItem(g);if(h)try{let a=JSON.parse(h);Array.isArray(a)&&M(a)}catch(a){console.warn("invalid date columns:",a)}else{let a=new Set;e.forEach(b=>{b.dates&&Object.keys(b.dates).forEach(b=>a.add(b))}),M(Array.from(a))}let i=`silver:${p}:target_rows`,j=`silver:${p}:realisasi_rows`,k=`silver:${p}:rows`,l=localStorage.getItem(k);if(l)try{let a=JSON.parse(l);if(Array.isArray(a)&&a.length){let b=new Map;e.forEach(a=>{null!==a.row_index&&void 0!==a.row_index&&b.set(Number(a.row_index),a)});let c=a.map((a,c)=>{let d=Number(a.row_index??c+1);return{...b.get(d),...a}});t(c)}}catch(a){console.warn("invalid local rows:",a)}let m=localStorage.getItem(i);if(m)try{let a=JSON.parse(m);Array.isArray(a)&&v(a)}catch(a){console.warn("invalid target data:",a)}let n=localStorage.getItem(j);if(n)try{let a=JSON.parse(n);Array.isArray(a)&&x(a)}catch(a){console.warn("invalid realisasi data:",a)}z((await f.supabase.from("shipments").select("*").eq("project_id",p).order("created_at",{ascending:!1})).data||[]),B((await f.supabase.from("project_notes").select("*").eq("project_id",p).order("created_at",{ascending:!1})).data||[]),ab()},aa=async()=>{try{let a=new Date(Date.now()-3e5).toISOString(),{data:b,error:c}=await f.supabase.from("user_presence").select("*").eq("project_id",p).gte("last_seen",a).order("last_seen",{ascending:!1});if(c)return void console.log("Database error in loadOnlineUsers:",c);if(b){let a=b.map(a=>a);Q(a)}}catch(a){console.log("Exception in loadOnlineUsers:",a)}},ab=()=>{if(!p)return;let a=f.supabase.channel(`public:tasks:project_${p}`).on("postgres_changes",{event:"*",schema:"public",table:"tasks",filter:`project_id=eq.${p}`},a=>{if("UPDATE"===a.eventType||"INSERT"===a.eventType)t(b=>{let c=a.new;return b.find(a=>a.id===c.id)?b.map(a=>a.id===c.id?c:a):[c,...b]});else if("DELETE"===a.eventType){let b=a.old?.id;b&&t(a=>a.filter(a=>a.id!==b))}}).subscribe(),b=f.supabase.channel(`public:shipments:project_${p}`).on("postgres_changes",{event:"*",schema:"public",table:"shipments",filter:`project_id=eq.${p}`},a=>{if(a.new){let b=a.new;z(a=>a.find(a=>a.id===b.id)?a.map(a=>a.id===b.id?b:a):[b,...a].slice(0,100))}else if("DELETE"===a.eventType){let b=a.old?.id;b&&z(a=>a.filter(a=>a.id!==b))}}).subscribe(),c=f.supabase.channel(`public:project_notes:project_${p}`).on("postgres_changes",{event:"*",schema:"public",table:"project_notes",filter:`project_id=eq.${p}`},a=>{if(a.new){let b=a.new;B(a=>a.find(a=>a.id===b.id)?a.map(a=>a.id===b.id?b:a):[b,...a])}else if("DELETE"===a.eventType){let b=a.old?.id;b&&B(a=>a.filter(a=>a.id!==b))}}).subscribe(),d=f.supabase.channel(`user_presence:project_${p}`).on("postgres_changes",{event:"*",schema:"public",table:"user_presence",filter:`project_id=eq.${p}`},a=>{aa()}).subscribe();return()=>{f.supabase.removeChannel(a),f.supabase.removeChannel(b),f.supabase.removeChannel(c),f.supabase.removeChannel(d)}},ac=(0,c.useMemo)(()=>{if(!L.length)return[];let a=[];s.forEach((b,c)=>{let d=b.description||`Task ${c+1}`;L.forEach((e,f)=>{let g=Z(b.dates?.[e]),h=0;for(let a=0;a<f;a++){let c=L[a];h+=Z(b.dates?.[c])}g>0&&a.push({date:e,task:d,progress:g,rowIndex:c,cumulative:h+g})})});let b=new Map;return a.forEach(a=>{b.has(a.date)||b.set(a.date,{date:a.date,totalProgress:0,tasks:{}});let c=b.get(a.date);c.tasks[a.task]=a.progress,c.totalProgress=a.cumulative}),Array.from(b.values())},[s,L]),ad=(0,c.useMemo)(()=>{if(!L.length)return[];let a=[];u.forEach((b,c)=>{let d=b.description||`Task ${c+1}`;L.forEach((e,f)=>{let g=Z(b.dates?.[e]),h=0;for(let a=0;a<f;a++){let c=L[a];h+=Z(b.dates?.[c])}g>0&&a.push({date:e,task:d,progress:g,rowIndex:c,cumulative:h+g})})});let b=new Map;return a.forEach(a=>{b.has(a.date)||b.set(a.date,{date:a.date,totalProgress:0,tasks:{}});let c=b.get(a.date);c.tasks[a.task]=a.progress,c.totalProgress=a.cumulative}),Array.from(b.values())},[u,L]),ae=(0,c.useMemo)(()=>{if(!L.length)return[];let a=[];w.forEach((b,c)=>{let d=b.description||`Task ${c+1}`;L.forEach((e,f)=>{let g=Z(b.dates?.[e]),h=0;for(let a=0;a<f;a++){let c=L[a];h+=Z(b.dates?.[c])}g>0&&a.push({date:e,task:d,progress:g,rowIndex:c,cumulative:h+g})})});let b=new Map;return a.forEach(a=>{b.has(a.date)||b.set(a.date,{date:a.date,totalProgress:0,tasks:{}});let c=b.get(a.date);c.tasks[a.task]=a.progress,c.totalProgress=a.cumulative}),Array.from(b.values())},[w,L]);(0,c.useMemo)(()=>s.map((a,b)=>({name:`${b+1}`,Plan:Number(a.plan_progress??0),Actual:Number(a.actual_progress??0),description:a.description?.substring(0,20)||`Task ${b+1}`,weight:Number(a.weight??0)})),[s]);let af=(0,c.useMemo)(()=>{let a=s.reduce((a,b)=>a+Z(b.weight),0),b=$(s)[L[L.length-1]]||0;return{plan:b,actual:b,target:$(u)[L[L.length-1]]||0,realisasi:$(w)[L[L.length-1]]||0,totalWeight:a,isValidWeight:a<=100,totalTasks:s.length+u.length+w.length,completedTasks:s.filter(a=>Z(a.actual_progress)>=100).length+u.filter(a=>Z(a.plan_progress)>=100).length+w.filter(a=>Z(a.actual_progress)>=100).length,totalUploaded:s.filter(a=>a.proof_url||a.is_uploaded).length+u.filter(a=>a.proof_url||a.is_uploaded).length+w.filter(a=>a.proof_url||a.is_uploaded).length}},[s,u,w,L]),ag=(0,c.useMemo)(()=>Object.entries(s.reduce((a,b)=>{let c=Z(b.actual_progress),d="Not Started";return c>0&&c<100?d="In Progress":c>=100&&(d="Completed"),a[d]=(a[d]||0)+1,a},{})).map(([a,b])=>({name:a,value:b})),[s]),ah=["#0088FE","#00C49F","#FFBB28","#FF8042"],ai=async()=>{if(!H.trim()||!p)return;let{data:a}=await f.supabase.auth.getUser(),b=a.user?.id,c=null;if(J)try{let a=encodeURIComponent(p),b=`${Date.now()}_${J.name}`,d=`${a}/notes/${b}`,{data:e,error:g}=await f.supabase.storage.from("proofs").upload(d,J);if(g)throw console.error("Error uploading audio:",g),g;let{data:h}=f.supabase.storage.from("proofs").getPublicUrl(d);h.publicUrl&&(c=h.publicUrl)}catch(a){console.error("Error uploading audio:",a)}let{error:d}=await f.supabase.from("project_notes").insert({project_id:p,content:H,audio_url:c,created_by:b||"unknown"});d?console.error("Error saving note:",d):(I(""),K(null))},aj=(a,c,d=!0,e=!0)=>{let f=$(a);return(0,b.jsxs)("div",{className:"bg-white rounded shadow mb-6",children:[(0,b.jsxs)("div",{className:"bg-gray-50 border-b p-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg",children:c}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Total Data: ",a.length," rows | Total Progress: ",f[L[L.length-1]]?.toFixed(2)||"0","%"]})]}),(0,b.jsx)("div",{className:"overflow-auto max-h-[500px]",children:(0,b.jsxs)("table",{className:"min-w-full border text-sm text-gray-700",children:[(0,b.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"border px-2 py-2 text-center w-12",children:"NO"}),(0,b.jsx)("th",{className:"border px-3 py-2 text-left min-w-[200px]",children:"DESCRIPTION"}),(0,b.jsx)("th",{className:"border px-2 py-2 text-center min-w-[80px]",children:"BOBOT %"}),d&&(0,b.jsx)("th",{className:"border px-2 py-2 text-center min-w-[100px]",children:"TARGET %"}),e&&(0,b.jsx)("th",{className:"border px-2 py-2 text-center min-w-[100px]",children:"REALISASI %"}),(0,b.jsx)("th",{className:"border px-2 py-2 text-center min-w-[150px]",children:"LOKASI"}),L.map((a,c)=>(0,b.jsx)("th",{className:"border px-2 py-2 text-center min-w-[120px] text-xs",children:a||`Tanggal ${c+1}`},c)),(0,b.jsx)("th",{className:"border px-2 py-2 text-center min-w-[100px]",children:"UPLOAD"}),(0,b.jsx)("th",{className:"border px-2 py-2 text-center min-w-[80px]",children:"STATUS"})]})}),(0,b.jsx)("tbody",{children:0===a.length?(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:7+L.length,className:"text-center py-8 text-gray-500",children:[(0,b.jsx)("div",{className:"text-2xl mb-2",children:"üìä"}),(0,b.jsx)("p",{children:"Belum ada data task"})]})}):(0,b.jsxs)(b.Fragment,{children:[a.map((a,c)=>{let f=e?Z(a.actual_progress):Z(a.plan_progress),g=f>=100,h=f>0&&f<100;return(0,b.jsxs)("tr",{className:`hover:bg-gray-50 ${g?"bg-green-50":h?"bg-yellow-50":"red"===a.color?"bg-red-50":"yellow"===a.color?"bg-yellow-50":"green"===a.color?"bg-green-50":""}`,children:[(0,b.jsx)("td",{className:"border px-2 py-2 text-center font-medium",children:c+1}),(0,b.jsxs)("td",{className:"border px-3 py-2 text-left",children:[(0,b.jsx)("div",{className:"font-medium",children:a.description||"-"}),a.row_index&&(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Row: ",a.row_index]})]}),(0,b.jsx)("td",{className:"border px-2 py-2 text-center",children:(0,b.jsxs)("span",{className:"font-semibold",children:[Z(a.weight).toFixed(1),"%"]})}),d&&(0,b.jsx)("td",{className:"border px-2 py-2 text-center",children:(0,b.jsxs)("span",{className:`px-2 py-1 rounded text-xs ${Z(a.plan_progress)>=100?"bg-green-100 text-green-800":Z(a.plan_progress)>0?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[Z(a.plan_progress).toFixed(1),"%"]})}),e&&(0,b.jsx)("td",{className:"border px-2 py-2 text-center",children:(0,b.jsxs)("span",{className:`px-2 py-1 rounded text-xs ${Z(a.actual_progress)>=100?"bg-green-100 text-green-800":Z(a.actual_progress)>0?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[Z(a.actual_progress).toFixed(1),"%"]})}),(0,b.jsx)("td",{className:"border px-2 py-2 text-center text-xs",children:a.location?(0,b.jsxs)("span",{className:"text-blue-600",title:a.location,children:["üìç ",a.location.length>20?a.location.substring(0,20)+"...":a.location]}):"-"}),L.map((c,d)=>(0,b.jsx)("td",{className:"border px-2 py-2 text-center text-xs",children:a.dates?.[c]?Z(a.dates[c]).toFixed(1):"-"},d)),(0,b.jsx)("td",{className:"border px-2 py-2 text-center",children:a.proof_url||a.is_uploaded?(0,b.jsx)("a",{href:a.proof_url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800 text-xs font-medium",children:"‚úÖ Uploaded"}):(0,b.jsx)("span",{className:"text-red-600 text-xs",children:"‚ùå Belum"})}),(0,b.jsx)("td",{className:"border px-2 py-2 text-center",children:(0,b.jsx)("span",{className:`px-2 py-1 rounded text-xs ${g?"bg-green-100 text-green-800":h?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:g?"Selesai":h?"Progress":"Belum"})})]},a.id||c)}),(0,b.jsxs)("tr",{className:"bg-blue-50 font-semibold",children:[(0,b.jsx)("td",{className:"border px-2 py-2 text-center",colSpan:2,children:"TOTAL %"}),(0,b.jsxs)("td",{className:"border px-2 py-2 text-center",children:[a.reduce((a,b)=>a+Z(b.weight),0).toFixed(1),"%"]}),d&&(0,b.jsxs)("td",{className:"border px-2 py-2 text-center",children:[a.reduce((a,b)=>a+Z(b.plan_progress),0).toFixed(1),"%"]}),e&&(0,b.jsxs)("td",{className:"border px-2 py-2 text-center",children:[a.reduce((a,b)=>a+Z(b.actual_progress),0).toFixed(1),"%"]}),(0,b.jsx)("td",{className:"border px-2 py-2 text-center",children:"-"}),L.map((a,c)=>(0,b.jsxs)("td",{className:"border px-2 py-2 text-center font-medium",children:[f[a]?.toFixed(1)||"0.0","%"]},c)),(0,b.jsxs)("td",{className:"border px-2 py-2 text-center",colSpan:2,children:[a.filter(a=>a.proof_url||a.is_uploaded).length," / ",a.length]})]})]})})]})})]})};return C?(0,b.jsx)("div",{className:"flex items-center justify-center h-screen text-gray-600",children:"Memuat data master dashboard..."}):(0,b.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,b.jsx)("header",{className:"mb-6",children:(0,b.jsxs)("div",{className:"flex justify-between items-center bg-blue-800 text-white p-4 rounded-md shadow",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"bg-white p-2 rounded",children:(0,b.jsx)("div",{className:"text-blue-800 font-bold text-lg",children:"MASTER"})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-2xl font-bold",children:["PT ELEKTRINDO UTAMA INDONESIA",(0,b.jsx)("br",{}),(0,b.jsx)("span",{className:"text-sm font-normal",children:"MECHANICAL ‚Äì ELECTRICAL ‚Äì FIRE PROTECTION SYSTEM"})]}),(0,b.jsxs)("div",{className:"mt-2 text-blue-200",children:[(0,b.jsx)("strong",{children:"MASTER MONITORING DASHBOARD"})," ‚Äî ",q]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,b.jsx)(()=>T?(0,b.jsxs)("div",{className:"flex items-center gap-3 bg-blue-50 px-3 py-2 rounded-lg border border-blue-200",children:[(0,b.jsx)("img",{src:V||`https://ui-avatars.com/api/?name=${encodeURIComponent(T.split("@")[0])}&background=random`,alt:"Profile",className:"w-8 h-8 rounded-full",onError:a=>{a.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(T.split("@")[0])}&background=random`}}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium text-gray-800",children:T}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 capitalize",children:[X||"user"," - Master Dashboard"]})]})]}):null,{}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>window.open(`/silver/${p}`,"_blank"),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-sm font-medium",children:"Buka Silver App"}),(0,b.jsx)("button",{onClick:()=>d.push("/projects"),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm font-medium",children:"Kembali ke Projects"})]})]})]})}),(0,b.jsx)(()=>{let[a,d]=(0,c.useState)(!1);return(0,b.jsxs)("div",{className:"bg-white p-3 rounded shadow mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm",children:"üë• User Online di Silver App"}),(0,b.jsx)("button",{onClick:()=>d(!a),className:"px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs flex items-center gap-1",children:a?"‚ñ≤ Sembunyikan":"‚ñº Tampilkan"})]}),a&&(0,b.jsxs)("div",{className:"mt-2 space-y-2",children:[P.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded border",children:[(0,b.jsxs)("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs font-bold",children:[a.user_metadata?.avatar_url?(0,b.jsx)("img",{src:a.user_metadata.avatar_url,alt:a.user_metadata.full_name||a.email,className:"w-8 h-8 rounded-full object-cover",onError:a=>{a.target.style.display="none"}}):null,(0,b.jsx)("div",{className:a.user_metadata?.avatar_url?"hidden":"",children:a.email.charAt(0).toUpperCase()})]}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"text-xs font-medium truncate",children:[a.user_metadata?.full_name||a.email,a.id===R?.id&&(0,b.jsx)("span",{className:"ml-1 text-blue-600 text-xs",children:"(Anda)"})]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500 truncate",children:["1"===a.active_tab&&"üìã Tab Planning","2"===a.active_tab&&"üìç Tab Lokasi","3"===a.active_tab&&"üéØ Tab Target","4"===a.active_tab&&"üìä Tab Realisasi","5"===a.active_tab&&"üìù Tab Catatan",a.editing_task&&` - Edit: ${a.editing_task}`]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:"Online"})]})]},a.id)),0===P.length&&(0,b.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,b.jsx)("div",{className:"text-2xl mb-1",children:"üëª"}),(0,b.jsx)("p",{children:"Tidak ada user online di Silver App"})]})]})]})},{}),(0,b.jsxs)("div",{className:"bg-white p-4 rounded shadow mb-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"üìã Informasi Proyek"}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:"Sinkron dengan Silver App"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"KODE PROYEK"}),(0,b.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:N.project_code||"P-EUI-000-Tanggal"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"JOB NAME"}),(0,b.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:N.job_name||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"CLIENT"}),(0,b.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:N.client||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"ALAMAT"}),(0,b.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:N.address||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"TANGGAL"}),(0,b.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:N.date||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"DEADLINE"}),(0,b.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:N.deadline||"-"})]}),(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"TIME SCHEDULE"}),(0,b.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:N.time_schedule||"-"})]})]})]}),(0,b.jsx)("div",{className:"mb-6 bg-white rounded-lg shadow",children:(0,b.jsx)("div",{className:"flex border-b overflow-x-auto",children:[{id:"overview",label:"üìä Overview",icon:"üìä"},{id:"comparison",label:"üìà Perbandingan",icon:"üìà"},{id:"tasks",label:"üìã Semua Tasks",icon:"üìã"},{id:"location",label:"üó∫Ô∏è Lokasi",icon:"üó∫Ô∏è"},{id:"documents",label:"üìé Dokumen",icon:"üìé"},{id:"notes",label:"üìù Catatan",icon:"üìù"}].map(a=>(0,b.jsxs)("button",{onClick:()=>F(a.id),className:`flex items-center gap-2 px-6 py-3 border-b-2 font-medium text-sm whitespace-nowrap ${E===a.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,b.jsx)("span",{children:a.icon}),a.label]},a.id))})}),"overview"===E&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,b.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-blue-100 p-3",children:(0,b.jsx)("span",{className:"text-blue-600 text-xl",children:"üìà"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Progress Rencana"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[af.plan.toFixed(1),"%"]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Dari ",s.length," tasks"]})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-green-100 p-3",children:(0,b.jsx)("span",{className:"text-green-600 text-xl",children:"üéØ"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Progress Target"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[af.target.toFixed(1),"%"]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Dari ",u.length," tasks"]})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-red-100 p-3",children:(0,b.jsx)("span",{className:"text-red-600 text-xl",children:"‚úÖ"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Progress Realisasi"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[af.realisasi.toFixed(1),"%"]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Dari ",w.length," tasks"]})]})]})}),(0,b.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"rounded-full bg-purple-100 p-3",children:(0,b.jsx)("span",{className:"text-purple-600 text-xl",children:"üìä"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Upload"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:af.totalUploaded}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Dokumen terupload"})]})]})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Kurva S - Progress per Tanggal (Planning)"}),(0,b.jsx)("div",{style:{width:"100%",height:300},children:(0,b.jsx)(n.ResponsiveContainer,{children:ac.length>0?(0,b.jsxs)(l.LineChart,{data:ac,children:[(0,b.jsx)(g.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(h.XAxis,{dataKey:"date",angle:-45,textAnchor:"end",height:60,interval:0,tick:{fontSize:10}}),(0,b.jsx)(i.YAxis,{}),(0,b.jsx)(j.Tooltip,{}),(0,b.jsx)(k.Legend,{}),(0,b.jsx)(m.Line,{type:"monotone",dataKey:"totalProgress",stroke:"#3b82f6",strokeWidth:2,dot:{r:3},activeDot:{r:5},name:"Total Progress"})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"üìä"}),(0,b.jsx)("p",{children:"Belum ada data progress per tanggal"}),(0,b.jsx)("p",{className:"text-sm",children:"Data akan muncul setelah diisi di Silver App"})]})})})}),(0,b.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,b.jsx)("p",{children:"‚Ä¢ Menunjukkan progress kumulatif per tanggal dari tab Planning"}),(0,b.jsx)("p",{children:"‚Ä¢ Data sinkron real-time dengan Silver App"})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Distribusi Status Task (Planning)"}),(0,b.jsx)("div",{style:{width:"100%",height:300},children:(0,b.jsx)(n.ResponsiveContainer,{children:ag.length>0?(0,b.jsxs)(G,{children:[(0,b.jsx)(aW,{data:ag,cx:"50%",cy:"50%",labelLine:!1,label:({name:a,percent:b})=>`${a} (${(100*(b||0)).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:ag.map((a,c)=>(0,b.jsx)(am.Cell,{fill:ah[c%ah.length]},`cell-${c}`))}),(0,b.jsx)(j.Tooltip,{})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"üìã"}),(0,b.jsx)("p",{children:"Belum ada data task"}),(0,b.jsx)("p",{className:"text-sm",children:"Data akan muncul setelah diisi di Silver App"})]})})})}),(0,b.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,b.jsx)("p",{children:"‚Ä¢ Menunjukkan distribusi status task dari tab Planning"}),(0,b.jsx)("p",{children:"‚Ä¢ Update real-time saat tim lapangan mengupdate progress"})]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Aktivitas Terkini"}),(0,b.jsxs)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:[y.slice(0,10).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Update Lokasi Lapangan"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:a.address})]}),(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:[new Date(a.created_at).toLocaleTimeString("id-ID"),(0,b.jsx)("div",{className:"text-xs",children:new Date(a.created_at).toLocaleDateString("id-ID")})]})]},a.id)),A.slice(0,5).map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded",children:[(0,b.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:"Catatan Lapangan"}),(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[a.content.substring(0,60),"..."]}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Oleh: ",a.created_by]})]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleTimeString("id-ID")})]},a.id)),0===y.length&&0===A.length&&(0,b.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"üìù"}),(0,b.jsx)("p",{children:"Belum ada aktivitas terkini"}),(0,b.jsx)("p",{className:"text-sm",children:"Tim lapangan belum mengupdate data"})]})]})]})]}),"comparison"===E&&(0,b.jsxs)("div",{className:"space-y-6",children:[(a=L.map(a=>{let b=$(s)[a]||0,c=$(u)[a]||0,d=$(w)[a]||0;return{date:a,Planning:b,Target:c,Realisasi:d,Gap:Math.max(0,c-d)}}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"üìä Perbandingan Planning vs Target vs Realisasi"}),(0,b.jsx)("div",{style:{width:"100%",height:400},children:(0,b.jsx)(n.ResponsiveContainer,{children:(0,b.jsxs)(l.LineChart,{data:a,children:[(0,b.jsx)(g.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(h.XAxis,{dataKey:"date",angle:-45,textAnchor:"end",height:60,interval:0,tick:{fontSize:10}}),(0,b.jsx)(i.YAxis,{label:{value:"Progress (%)",angle:-90,position:"insideLeft",offset:-5,style:{textAnchor:"middle",fontSize:12}}}),(0,b.jsx)(j.Tooltip,{}),(0,b.jsx)(k.Legend,{}),(0,b.jsx)(m.Line,{type:"monotone",dataKey:"Planning",stroke:"#3b82f6",strokeWidth:3,dot:{r:4},activeDot:{r:6}}),(0,b.jsx)(m.Line,{type:"monotone",dataKey:"Target",stroke:"#10b981",strokeWidth:3,strokeDasharray:"5 5",dot:{r:4},activeDot:{r:6}}),(0,b.jsx)(m.Line,{type:"monotone",dataKey:"Realisasi",stroke:"#ef4444",strokeWidth:3,dot:{r:4},activeDot:{r:6}}),(0,b.jsx)(bB,{type:"monotone",dataKey:"Gap",stroke:"#f59e0b",fill:"#f59e0b",fillOpacity:.3,strokeWidth:1})]})})}),(0,b.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"p-3 bg-blue-50 rounded border",children:[(0,b.jsx)("div",{className:"font-semibold text-blue-800",children:"Planning"}),(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[af.plan.toFixed(1),"%"]}),(0,b.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Total progress dari tab Planning"})]}),(0,b.jsxs)("div",{className:"p-3 bg-green-50 rounded border",children:[(0,b.jsx)("div",{className:"font-semibold text-green-800",children:"Target"}),(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[af.target.toFixed(1),"%"]}),(0,b.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Target yang ditetapkan"})]}),(0,b.jsxs)("div",{className:"p-3 bg-red-50 rounded border",children:[(0,b.jsx)("div",{className:"font-semibold text-red-800",children:"Realisasi"}),(0,b.jsxs)("div",{className:"text-2xl font-bold",children:[af.realisasi.toFixed(1),"%"]}),(0,b.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"Progress aktual lapangan"})]})]}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 rounded border",children:(0,b.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,b.jsx)("strong",{children:"Keterangan:"})," Chart menunjukkan perbandingan progress antara planning (biru), target (hijau putus-putus), dan realisasi (merah). Area kuning menunjukkan gap antara target dan realisasi."]})})]})),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"üìà Kurva S Target"}),(0,b.jsx)("div",{style:{width:"100%",height:300},children:(0,b.jsx)(n.ResponsiveContainer,{children:ad.length>0?(0,b.jsxs)(l.LineChart,{data:ad,children:[(0,b.jsx)(g.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(h.XAxis,{dataKey:"date",angle:-45,textAnchor:"end",height:60,interval:0,tick:{fontSize:10}}),(0,b.jsx)(i.YAxis,{}),(0,b.jsx)(j.Tooltip,{}),(0,b.jsx)(k.Legend,{}),(0,b.jsx)(m.Line,{type:"monotone",dataKey:"totalProgress",stroke:"#10b981",strokeWidth:2,dot:{r:3},activeDot:{r:5},name:"Total Progress"})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"üéØ"}),(0,b.jsx)("p",{children:"Belum ada data target"}),(0,b.jsx)("p",{className:"text-sm",children:"Data akan muncul setelah diisi di Silver App Tab Target"})]})})})})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"üìà Kurva S Realisasi"}),(0,b.jsx)("div",{style:{width:"100%",height:300},children:(0,b.jsx)(n.ResponsiveContainer,{children:ae.length>0?(0,b.jsxs)(l.LineChart,{data:ae,children:[(0,b.jsx)(g.CartesianGrid,{strokeDasharray:"3 3"}),(0,b.jsx)(h.XAxis,{dataKey:"date",angle:-45,textAnchor:"end",height:60,interval:0,tick:{fontSize:10}}),(0,b.jsx)(i.YAxis,{}),(0,b.jsx)(j.Tooltip,{}),(0,b.jsx)(k.Legend,{}),(0,b.jsx)(m.Line,{type:"monotone",dataKey:"totalProgress",stroke:"#ef4444",strokeWidth:2,dot:{r:3},activeDot:{r:5},name:"Total Progress"})]}):(0,b.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"‚úÖ"}),(0,b.jsx)("p",{children:"Belum ada data realisasi"}),(0,b.jsx)("p",{className:"text-sm",children:"Data akan muncul setelah diisi di Silver App Tab Realisasi"})]})})})})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"üìä Statistik Perbandingan"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"p-3 bg-blue-50 rounded border",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-medium",children:"Planning vs Target"}),(0,b.jsxs)("span",{className:`font-bold ${5>Math.abs(af.plan-af.target)?"text-green-600":"text-red-600"}`,children:[Math.abs(af.plan-af.target).toFixed(1),"%"]})]}),(0,b.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:af.plan>=af.target?"Planning sesuai target":"Planning di bawah target"})]}),(0,b.jsxs)("div",{className:"p-3 bg-green-50 rounded border",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-medium",children:"Target vs Realisasi"}),(0,b.jsxs)("span",{className:`font-bold ${5>Math.abs(af.target-af.realisasi)?"text-green-600":"text-red-600"}`,children:[Math.abs(af.target-af.realisasi).toFixed(1),"%"]})]}),(0,b.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:af.realisasi>=af.target?"Realisasi sesuai target":"Realisasi di bawah target"})]}),(0,b.jsxs)("div",{className:"p-3 bg-yellow-50 rounded border",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"font-medium",children:"Planning vs Realisasi"}),(0,b.jsxs)("span",{className:`font-bold ${5>Math.abs(af.plan-af.realisasi)?"text-green-600":"text-red-600"}`,children:[Math.abs(af.plan-af.realisasi).toFixed(1),"%"]})]}),(0,b.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:af.realisasi>=af.plan?"Realisasi sesuai planning":"Realisasi di bawah planning"})]}),(0,b.jsxs)("div",{className:"p-3 bg-gray-50 rounded border",children:[(0,b.jsx)("div",{className:"font-medium mb-2",children:"Summary Progress"}),(0,b.jsxs)("div",{className:"text-sm space-y-1",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Total Bobot:"}),(0,b.jsxs)("span",{className:"font-semibold",children:[af.totalWeight.toFixed(1),"%"]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Status Bobot:"}),(0,b.jsx)("span",{className:`font-semibold ${af.isValidWeight?"text-green-600":"text-red-600"}`,children:af.isValidWeight?"VALID":"INVALID (>100%)"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Total Tasks:"}),(0,b.jsx)("span",{className:"font-semibold",children:af.totalTasks})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{children:"Selesai:"}),(0,b.jsx)("span",{className:"font-semibold",children:af.completedTasks})]})]})]})]})]})]})]}),"tasks"===E&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,b.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"üìã Data Tasks dari Silver App"}),(0,b.jsx)("p",{className:"text-sm text-blue-700",children:"Data ini ditampilkan dari localStorage Silver App yang disinkronkan secara real-time. Anda dapat melihat semua tabel dari Planning, Target, dan Realisasi dalam satu dashboard."}),(0,b.jsxs)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,b.jsxs)("span",{children:["Planning: ",(0,b.jsx)("strong",{children:s.length})," tasks"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,b.jsxs)("span",{children:["Target: ",(0,b.jsx)("strong",{children:u.length})," tasks"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,b.jsxs)("span",{children:["Realisasi: ",(0,b.jsx)("strong",{children:w.length})," tasks"]})]})]})]}),aj(s,"Tabel Planning - Target vs Realisasi",!0,!0),aj(u,"Tabel Target",!0,!1),aj(w,"Tabel Realisasi",!1,!0)]}),"location"===E&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"üó∫Ô∏è Peta Tracking Real-time"}),(0,b.jsx)(bC,{projectId:p})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"üìã Riwayat Lokasi Lapangan"}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",y.length," lokasi"]})]}),(0,b.jsx)("div",{className:"overflow-auto max-h-[500px]",children:(0,b.jsxs)("table",{className:"min-w-full border text-sm",children:[(0,b.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"border px-4 py-2",children:"Waktu"}),(0,b.jsx)("th",{className:"border px-4 py-2",children:"Lokasi"}),(0,b.jsx)("th",{className:"border px-4 py-2",children:"Koordinat"}),(0,b.jsx)("th",{className:"border px-4 py-2",children:"Akurasi"}),(0,b.jsx)("th",{className:"border px-4 py-2",children:"Status"}),(0,b.jsx)("th",{className:"border px-4 py-2",children:"Catatan"})]})}),(0,b.jsxs)("tbody",{children:[y.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"border px-4 py-2",children:[(0,b.jsx)("div",{className:"text-xs font-medium",children:new Date(a.created_at).toLocaleDateString("id-ID")}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:new Date(a.created_at).toLocaleTimeString("id-ID")})]}),(0,b.jsx)("td",{className:"border px-4 py-2",children:a.address}),(0,b.jsxs)("td",{className:"border px-4 py-2 text-xs font-mono",children:[a.last_lat.toFixed(6),", ",a.last_lng.toFixed(6)]}),(0,b.jsx)("td",{className:"border px-4 py-2",children:(0,b.jsxs)("span",{className:`px-2 py-1 rounded text-xs ${a.accuracy<=10?"bg-green-100 text-green-800":a.accuracy<=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Math.round(a.accuracy),"m"]})}),(0,b.jsx)("td",{className:"border px-4 py-2",children:(0,b.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:a.status})}),(0,b.jsxs)("td",{className:"border px-4 py-2 text-xs",children:[a.item_name&&(0,b.jsx)("div",{className:"font-medium",children:a.item_name}),a.notes&&(0,b.jsx)("div",{className:"text-gray-600 mt-1",children:a.notes})]})]},a.id)),0===y.length&&(0,b.jsx)("tr",{children:(0,b.jsxs)("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:[(0,b.jsx)("div",{className:"text-4xl mb-2",children:"üìç"}),(0,b.jsx)("p",{children:"Belum ada riwayat lokasi"}),(0,b.jsx)("p",{className:"text-sm",children:"Tim lapangan belum mengupdate lokasi"})]})})]})]})})]})]}),"documents"===E&&(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"üìé Dokumen & Bukti Upload dari Silver App"}),(0,b.jsx)("div",{className:"mb-4 p-3 bg-blue-50 rounded border",children:(0,b.jsx)("p",{className:"text-sm text-blue-700",children:"Dokumen ini diupload melalui Silver App menggunakan Supabase Storage"})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[[...s,...u,...w].filter(a=>a.proof_url||a.is_uploaded).map((a,c)=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow bg-white",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-blue-600 text-lg",children:"üìé"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.description||`Task ${c+1}`}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsxs)("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded",children:[a.plan_progress?`Target: ${Z(a.plan_progress).toFixed(1)}%`:"",a.actual_progress?`Realisasi: ${Z(a.actual_progress).toFixed(1)}%`:""]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded ${a.is_uploaded?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:a.is_uploaded?"‚úÖ Supabase":"üìé Single"})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("a",{href:a.proof_url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-center py-2 px-3 rounded text-sm",children:"Lihat Dokumen"}),(0,b.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(a.proof_url),alert("Link dokumen berhasil disalin!")},className:"bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-3 rounded text-sm",title:"Salin link",children:"üìã"})]}),a.location&&(0,b.jsxs)("div",{className:"mt-2 text-xs text-gray-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Lokasi:"})," ",a.location]})]},a.id||c)),0===[...s,...u,...w].filter(a=>a.proof_url||a.is_uploaded).length&&(0,b.jsxs)("div",{className:"col-span-full text-center py-12 text-gray-500",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"üìé"}),(0,b.jsx)("p",{className:"text-lg font-medium",children:"Belum ada dokumen yang diupload"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:"Tim lapangan belum mengupload dokumen melalui Silver App"}),(0,b.jsx)("button",{onClick:()=>window.open(`/silver/${p}`,"_blank"),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"Buka Silver App untuk Upload"})]})]}),[...s,...u,...w].filter(a=>a.proof_url||a.is_uploaded).length>0&&(0,b.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded border",children:[(0,b.jsx)("h4",{className:"font-semibold mb-2",children:"üìä Statistik Upload"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,b.jsxs)("div",{className:"p-2 bg-white rounded border",children:[(0,b.jsx)("div",{className:"font-medium",children:"Total Upload"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:[...s,...u,...w].filter(a=>a.proof_url||a.is_uploaded).length})]}),(0,b.jsxs)("div",{className:"p-2 bg-white rounded border",children:[(0,b.jsx)("div",{className:"font-medium",children:"Supabase Storage"}),(0,b.jsx)("div",{className:"text-2xl font-bold text-green-600",children:[...s,...u,...w].filter(a=>a.is_uploaded).length})]}),(0,b.jsxs)("div",{className:"p-2 bg-white rounded border",children:[(0,b.jsx)("div",{className:"font-medium",children:"Persentase Upload"}),(0,b.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[([...s,...u,...w].filter(a=>a.proof_url||a.is_uploaded).length/[...s,...u,...w].length*100||0).toFixed(1),"%"]})]})]})]})]}),"notes"===E&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"Tambah Catatan (Master)"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("textarea",{value:H,onChange:a=>I(a.target.value),placeholder:"Tulis catatan penting untuk proyek ini...",className:"w-full h-32 p-3 border rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tambah Voice Note (Opsional)"}),(0,b.jsx)("input",{type:"file",accept:"audio/*",onChange:a=>K(a.target.files?.[0]||null),className:"w-full"})]}),(0,b.jsx)("button",{onClick:ai,disabled:!H.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-medium mt-6",children:"Simpan Catatan"})]}),J&&(0,b.jsxs)("p",{className:"text-sm text-green-600",children:["‚úÖ File audio siap diupload ke Supabase Storage: ",J.name]})]})]}),(0,b.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h3",{className:"font-semibold",children:"Catatan Proyek"}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",A.length," catatan"]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[A.map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:new Date(a.created_at).toLocaleString("id-ID")}),(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:a.created_by})]}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:new Date(a.updated_at).toLocaleTimeString("id-ID")})]}),(0,b.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:a.content}),a.audio_url&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Voice Note:"}),(0,b.jsx)("a",{href:a.audio_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800",children:"Download Audio"})]}),(0,b.jsxs)("audio",{controls:!0,className:"w-full",children:[(0,b.jsx)("source",{src:a.audio_url,type:"audio/mpeg"}),"Browser Anda tidak mendukung pemutar audio."]})]})]},a.id)),0===A.length&&(0,b.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,b.jsx)("div",{className:"text-6xl mb-4",children:"üìù"}),(0,b.jsx)("p",{className:"text-lg font-medium",children:"Belum ada catatan"}),(0,b.jsx)("p",{className:"text-sm mt-2",children:"Tambahkan catatan pertama untuk proyek ini"})]})]})]})]}),(0,b.jsx)("div",{className:"mt-8 bg-white p-6 rounded-lg shadow",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("strong",{className:"text-blue-800",children:"KETERANGAN MASTER DASHBOARD:"}),(0,b.jsxs)("ol",{className:"list-decimal list-inside mt-2 text-gray-700 space-y-1",children:[(0,b.jsx)("li",{children:"Dashboard monitoring ini menampilkan data real-time dari tim lapangan melalui Silver App"}),(0,b.jsx)("li",{children:"Semua data tersinkronisasi otomatis dengan localStorage Silver App"}),(0,b.jsx)("li",{children:"Supabase Storage memastikan keamanan dokumen"}),(0,b.jsx)("li",{children:"Progress dihitung secara kumulatif sesuai implementasi Silver App"})]})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"text-blue-800 font-semibold mb-2",children:"STATUS SINKRONISASI"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:"Silver App Data:"}),(0,b.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:"‚úÖ TERSINKRON"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:"Database Real-time:"}),(0,b.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:"‚úÖ AKTIF"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("span",{children:"User Online:"}),(0,b.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:["üë• ",P.length," USERS"]})]})]})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"mt-4 font-semibold text-blue-800",children:"Disetujui oleh:"}),(0,b.jsx)("div",{className:"mt-10 underline font-medium",children:"Rudi Winarto"}),(0,b.jsx)("div",{className:"text-gray-600",children:"PT Elektrindo Utama Indonesia"}),(0,b.jsxs)("div",{className:"mt-6 text-xs text-gray-500",children:["Master Dashboard v2.0",(0,b.jsx)("br",{}),"Terintegrasi dengan Silver App"]})]})]})})]})}a.s(["default",()=>bD],27)}];

//# sourceMappingURL=app_projects_%5BprojectId%5D_master_page_tsx_7388e1d1._.js.map