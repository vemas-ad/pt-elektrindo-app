(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89963,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(70703),r=e.i(18566),l=e.i(53210),i=e.i(72526),n=e.i(85183),d=e.i(93230),o=e.i(34239),c=e.i(59559),m=e.i(29228),x=e.i(55706),p=e.i(31195),u=e.i(25949),h=e.i(70778),g=e.i(98596),b=e.i(22273),y=e.i(62327),f=e.i(27241),v=e.i(73310);function j(e){var t=(0,f.useAppDispatch)();return(0,a.useEffect)(()=>{t((0,v.updatePolarOptions)(e))},[t,e]),null}var N=e.i(48973),A=e.i(51883),w=["layout"];function k(){return(k=Object.assign.bind()).apply(null,arguments)}var S={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},P=(0,a.forwardRef)(function(e,t){var s,r=(0,A.resolveDefaultProps)(e.categoricalChartProps,S),{layout:l}=r,i=function(e,t){if(null==e)return{};var a,s,r=function(e,t){if(null==e)return{};var a={};for(var s in e)if(({}).hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)a=l[s],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(r,w),{chartName:n,defaultTooltipEventType:d,validateTooltipEventTypes:o,tooltipPayloadSearcher:c}=e;return a.createElement(h.RechartsStoreProvider,{preloadedState:{options:{chartName:n,defaultTooltipEventType:d,validateTooltipEventTypes:o,tooltipPayloadSearcher:c,eventEmitter:void 0}},reduxStoreName:null!=(s=r.id)?s:n},a.createElement(g.ChartDataContextProvider,{chartData:r.data}),a.createElement(b.ReportMainChartProps,{layout:l,margin:r.margin}),a.createElement(y.ReportChartProps,{baseValue:void 0,accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className,reverseStackOrder:r.reverseStackOrder}),a.createElement(j,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),a.createElement(N.CategoricalChart,k({},i,{ref:t})))});function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach(function(t){var s,r,l;s=e,r=t,l=a[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var I=["item"],O=T(T({},S),{},{layout:"centric",startAngle:0,endAngle:360}),D=(0,a.forwardRef)((e,t)=>{var s=(0,A.resolveDefaultProps)(e,O);return a.createElement(P,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:I,tooltipPayloadSearcher:u.arrayTooltipSearcher,categoricalChartProps:s,ref:t})}),_=e.i(92068),C=e.i(7670),R=e.i(61849),L=e.i(92860),M=e.i(41088),B=e.i(79812),K=e.i(61764),F=e.i(46710),$=e.i(73962),U=e.i(91561),G=e.i(77320),W=e=>e.graphicalItems.polarItems,V=(0,R.createSelector)([$.pickAxisType,U.pickAxisId],K.itemAxisPredicate),z=(0,R.createSelector)([W,K.selectBaseAxis,V],K.combineGraphicalItemsSettings),q=(0,R.createSelector)([z],K.combineGraphicalItemsData),Y=(0,R.createSelector)([q,L.selectChartDataAndAlwaysIgnoreIndexes],K.combineDisplayedData),J=(0,R.createSelector)([Y,K.selectBaseAxis,z],K.combineAppliedValues);(0,R.createSelector)([Y,K.selectBaseAxis,z],(e,t,a)=>a.length>0?e.flatMap(e=>a.flatMap(a=>{var s;return{value:(0,B.getValueByDataKey)(e,null!=(s=t.dataKey)?s:a.dataKey),errorDomain:[]}})).filter(Boolean):(null==t?void 0:t.dataKey)!=null?e.map(e=>({value:(0,B.getValueByDataKey)(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})));var X=()=>void 0,Z=(0,R.createSelector)([Y,K.selectBaseAxis,z,K.selectAllErrorBarSettings,$.pickAxisType],K.combineDomainOfAllAppliedNumericalValuesIncludingErrorValues),H=(0,R.createSelector)([K.selectBaseAxis,K.selectDomainDefinition,K.selectDomainFromUserPreference,X,Z,X,F.selectChartLayout,$.pickAxisType],K.combineNumericalDomain),Q=(0,R.createSelector)([K.selectBaseAxis,F.selectChartLayout,Y,J,G.selectStackOffsetType,$.pickAxisType,H],K.combineAxisDomain),ee=(0,R.createSelector)([Q,K.selectBaseAxis,K.selectRealScaleType],K.combineNiceTicks);function et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function ea(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?et(Object(a),!0).forEach(function(t){var s,r,l;s=e,r=t,l=a[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):et(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}(0,R.createSelector)([K.selectBaseAxis,Q,ee,$.pickAxisType],K.combineAxisDomainWithNiceTicks);var es=(0,R.createSelector)([W,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),er=[],el=(e,t,a)=>(null==a?void 0:a.length)===0?er:a,ei=(0,R.createSelector)([L.selectChartDataAndAlwaysIgnoreIndexes,es,el],(e,t,a)=>{var s,{chartData:r}=e;if(null!=t&&((s=(null==t?void 0:t.data)!=null&&t.data.length>0?t.data:r)&&s.length||null==a||(s=a.map(e=>ea(ea({},t.presentationProps),e.props))),null!=s))return s}),en=(0,R.createSelector)([ei,es,el],(e,t,a)=>{if(null!=e&&null!=t)return e.map((e,s)=>{var r,l,i=(0,B.getValueByDataKey)(e,t.nameKey,t.name);return l=null!=a&&null!=(r=a[s])&&null!=(r=r.props)&&r.fill?a[s].props.fill:"object"==typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:(0,B.getTooltipNameProp)(i,t.dataKey),color:l,payload:e,type:t.legendType}})}),ed=(0,R.createSelector)([ei,es,el,M.selectChartOffsetInternal],(e,t,a,s)=>{if(null!=t&&null!=e)return function(e){var t,a,s,{pieSettings:r,displayedData:l,cells:i,offset:n}=e,{cornerRadius:d,startAngle:o,endAngle:c,dataKey:m,nameKey:x,tooltipType:p}=r,u=Math.abs(r.minAngle),h=(0,eh.mathSign)(c-o)*Math.min(Math.abs(c-o),360),g=Math.abs(h),b=l.length<=1?0:null!=(t=r.paddingAngle)?t:0,y=l.filter(e=>0!==(0,B.getValueByDataKey)(e,m,0)).length,f=g-y*u-(g>=360?y:y-1)*b,v=l.reduce((e,t)=>{var a=(0,B.getValueByDataKey)(t,m,0);return e+((0,eh.isNumber)(a)?a:0)},0);return v>0&&(a=l.map((e,t)=>{var a,l=(0,B.getValueByDataKey)(e,m,0),c=(0,B.getValueByDataKey)(e,x,t),g=((e,t,a)=>{var s,{top:r,left:l,width:i,height:n}=t,d=(0,eu.getMaxRadius)(i,n),o=l+(0,eh.getPercentValue)(e.cx,i,i/2),c=r+(0,eh.getPercentValue)(e.cy,n,n/2),m=(0,eh.getPercentValue)(e.innerRadius,d,0);return{cx:o,cy:c,innerRadius:m,outerRadius:(s=e.outerRadius,"function"==typeof s?(0,eh.getPercentValue)(s(a),d,.8*d):(0,eh.getPercentValue)(s,d,.8*d)),maxRadius:e.maxRadius||Math.sqrt(i*i+n*n)/2}})(r,n,e),y=((0,eh.isNumber)(l)?l:0)/v,j=eL(eL({},e),i&&i[t]&&i[t].props),N=(a=t?s.endAngle+(0,eh.mathSign)(h)*b*(0!==l):o)+(0,eh.mathSign)(h)*((0!==l?u:0)+y*f),A=(a+N)/2,w=(g.innerRadius+g.outerRadius)/2,k=[{name:c,value:l,payload:j,dataKey:m,type:p,graphicalItemId:r.id}],S=(0,eu.polarToCartesian)(g.cx,g.cy,w,A);return s=eL(eL(eL(eL({},r.presentationProps),{},{percent:y,cornerRadius:"string"==typeof d?parseFloat(d):d,name:c,tooltipPayload:k,midAngle:A,middleRadius:w,tooltipPosition:S},j),g),{},{value:l,dataKey:m,startAngle:a,endAngle:N,payload:j,paddingAngle:(0,eh.mathSign)(h)*b})})),a}({offset:s,pieSettings:t,displayedData:e,cells:a})}),eo=e.i(97865),ec=e.i(72733),em=e.i(9516),ex=e.i(22787),ep=e.i(81977),eu=e.i(68970),eh=e.i(94395),eg=e.i(73393),eb=e.i(18519),ey=e.i(94585),ef=e.i(844),ev=e.i(6907),ej=e.i(95146),eN=e.i(94810),eA=e.i(40657),ew=e.i(15549),ek=e.i(91187),eS=e.i(57999),eP=e.i(66576),eE=e.i(69212),eT=e.i(29601),eI=e.i(18457),eO=["key"],eD=["onMouseEnter","onClick","onMouseLeave"],e_=["id"],eC=["id"];function eR(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function eL(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(a),!0).forEach(function(t){var s,r,l;s=e,r=t,l=a[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eR(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function eM(){return(eM=Object.assign.bind()).apply(null,arguments)}function eB(e,t){if(null==e)return{};var a,s,r=function(e,t){if(null==e)return{};var a={};for(var s in e)if(({}).hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)a=l[s],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function eK(e){var t=(0,a.useMemo)(()=>(0,ep.findAllByType)(e.children,ex.Cell),[e.children]),s=(0,f.useAppSelector)(a=>en(a,e.id,t));return null==s?null:a.createElement(ej.SetPolarLegendPayload,{legendPayload:s})}var eF=a.memo(e=>{var{dataKey:t,nameKey:s,sectors:r,stroke:l,strokeWidth:i,fill:n,name:d,hide:o,tooltipType:c,id:m}=e,x={dataDefinedOnItem:r.map(e=>e.tooltipPayload),positions:r.map(e=>e.tooltipPosition),settings:{stroke:l,strokeWidth:i,fill:n,dataKey:t,nameKey:s,name:(0,B.getTooltipNameProp)(d,t),hide:o,type:c,color:n,unit:"",graphicalItemId:m}};return a.createElement(ef.SetTooltipEntrySettings,{tooltipEntrySettings:x})});function e$(e){var{sectors:t,props:s,showLabels:r}=e,{label:l,labelLine:i,dataKey:n}=s;if(!r||!l||!t)return null;var d=(0,eS.svgPropertiesNoEvents)(s),o=(0,eS.svgPropertiesNoEventsFromUnknown)(l),c=(0,eS.svgPropertiesNoEventsFromUnknown)(i),m="object"==typeof l&&"offsetRadius"in l&&"number"==typeof l.offsetRadius&&l.offsetRadius||20,x=t.map((e,t)=>{var s,r,x=(e.startAngle+e.endAngle)/2,p=(0,eu.polarToCartesian)(e.cx,e.cy,e.outerRadius+m,x),u=eL(eL(eL(eL({},d),e),{},{stroke:"none"},o),{},{index:t,textAnchor:(s=p.x)>(r=e.cx)?"start":s<r?"end":"middle"},p),h=eL(eL(eL(eL({},d),e),{},{fill:"none",stroke:e.fill},c),{},{index:t,points:[(0,eu.polarToCartesian)(e.cx,e.cy,e.outerRadius,x),p],key:"line"});return a.createElement(eT.ZIndexLayer,{zIndex:eI.DefaultZIndexes.label,key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},a.createElement(eo.Layer,null,i&&((e,t)=>{if(a.isValidElement(e))return a.cloneElement(e,t);if("function"==typeof e)return e(t);var s=(0,C.clsx)("recharts-pie-label-line","boolean"!=typeof e?e.className:""),{key:r}=t,l=eB(t,eO);return a.createElement(ec.Curve,eM({},l,{type:"linear",className:s}))})(i,h),((e,t,s)=>{if(a.isValidElement(e))return a.cloneElement(e,t);var r=s;if("function"==typeof e&&(r=e(t),a.isValidElement(r)))return r;var l=(0,C.clsx)("recharts-pie-label-text",e&&"object"==typeof e&&"className"in e&&"string"==typeof e.className?e.className:"");return a.createElement(em.Text,eM({},t,{alignmentBaseline:"middle",className:l}),r)})(l,u,(0,B.getValueByDataKey)(e,n))))});return a.createElement(eo.Layer,{className:"recharts-pie-labels"},x)}function eU(e){var{sectors:t,props:s,showLabels:r}=e,{label:l}=s;return"object"==typeof l&&null!=l&&"position"in l?a.createElement(eE.LabelListFromLabelProp,{label:l}):a.createElement(e$,{sectors:t,props:s,showLabels:r})}function eG(e){var{sectors:t,activeShape:s,inactiveShape:r,allOtherPieProps:l,shape:i,id:n}=e,d=(0,f.useAppSelector)(ev.selectActiveTooltipIndex),o=(0,f.useAppSelector)(ev.selectActiveTooltipDataKey),c=(0,f.useAppSelector)(ev.selectActiveTooltipGraphicalItemId),{onMouseEnter:m,onClick:x,onMouseLeave:p}=l,u=eB(l,eD),h=(0,ey.useMouseEnterItemDispatch)(m,l.dataKey,n),g=(0,ey.useMouseLeaveItemDispatch)(p),b=(0,ey.useMouseClickItemDispatch)(x,l.dataKey,n);return null==t||0===t.length?null:a.createElement(a.Fragment,null,t.map((e,m)=>{if((null==e?void 0:e.startAngle)===0&&(null==e?void 0:e.endAngle)===0&&1!==t.length)return null;var x=null==c||c===n,p=String(m)===d&&(null==o||l.dataKey===o)&&x,y=s&&p?s:d?r:null,f=eL(eL({},e),{},{stroke:e.stroke,tabIndex:-1,[eN.DATA_ITEM_INDEX_ATTRIBUTE_NAME]:m,[eN.DATA_ITEM_GRAPHICAL_ITEM_ID_ATTRIBUTE_NAME]:n});return a.createElement(eo.Layer,eM({key:"sector-".concat(null==e?void 0:e.startAngle,"-").concat(null==e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(m),tabIndex:-1,className:"recharts-pie-sector"},(0,eg.adaptEventsOfChild)(u,e,m),{onMouseEnter:h(e,m),onMouseLeave:g(e,m),onClick:b(e,m)}),a.createElement(eb.Shape,eM({option:null!=i?i:y,index:m,shapeType:"sector",isActive:p},f)))}))}function eW(e){var{showLabels:t,sectors:s,children:r}=e,l=(0,a.useMemo)(()=>t&&s?s.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[s,t]);return a.createElement(eE.PolarLabelListContextProvider,{value:t?l:void 0},r)}function eV(e){var{props:t,previousSectorsRef:s,id:r}=e,{sectors:l,isAnimationActive:i,animationBegin:n,animationDuration:d,animationEasing:o,activeShape:c,inactiveShape:m,onAnimationStart:x,onAnimationEnd:p}=t,u=(0,eA.useAnimationId)(t,"recharts-pie-"),h=s.current,[g,b]=(0,a.useState)(!1),y=(0,a.useCallback)(()=>{"function"==typeof p&&p(),b(!1)},[p]),f=(0,a.useCallback)(()=>{"function"==typeof x&&x(),b(!0)},[x]);return a.createElement(eW,{showLabels:!g,sectors:l},a.createElement(eP.JavascriptAnimate,{animationId:u,begin:n,duration:d,isActive:i,easing:o,onAnimationStart:f,onAnimationEnd:y,key:u},e=>{var i=[],n=l&&l[0],d=null==n?void 0:n.startAngle;return null==l||l.forEach((t,a)=>{var s=h&&h[a],r=a>0?(0,_.default)(t,"paddingAngle",0):0;if(s){var l=(0,eh.interpolate)(s.endAngle-s.startAngle,t.endAngle-t.startAngle,e),n=eL(eL({},t),{},{startAngle:d+r,endAngle:d+l+r});i.push(n),d=n.endAngle}else{var{endAngle:o,startAngle:c}=t,m=(0,eh.interpolate)(0,o-c,e),x=eL(eL({},t),{},{startAngle:d+r,endAngle:d+m+r});i.push(x),d=x.endAngle}}),s.current=i,a.createElement(eo.Layer,null,a.createElement(eG,{sectors:i,activeShape:c,inactiveShape:m,allOtherPieProps:t,shape:t.shape,id:r}))}),a.createElement(eU,{showLabels:!g,sectors:l,props:t}),t.children)}var ez={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:eI.DefaultZIndexes.area};function eq(e){var{id:t}=e,s=eB(e,e_),{hide:r,className:l,rootTabIndex:i}=e,n=(0,a.useMemo)(()=>(0,ep.findAllByType)(e.children,ex.Cell),[e.children]),d=(0,f.useAppSelector)(e=>ed(e,t,n)),o=(0,a.useRef)(null),c=(0,C.clsx)("recharts-pie",l);return r||null==d?(o.current=null,a.createElement(eo.Layer,{tabIndex:i,className:c})):a.createElement(eT.ZIndexLayer,{zIndex:e.zIndex},a.createElement(eF,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:d,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),a.createElement(eo.Layer,{tabIndex:i,className:c},a.createElement(eV,{props:eL(eL({},s),{},{sectors:d}),previousSectorsRef:o,id:t})))}function eY(e){var t=(0,A.resolveDefaultProps)(e,ez),{id:s}=t,r=eB(t,eC),l=(0,eS.svgPropertiesNoEvents)(r);return a.createElement(ew.RegisterGraphicalItemId,{id:s,type:"pie"},e=>a.createElement(a.Fragment,null,a.createElement(ek.SetPolarGraphicalItem,{type:"pie",id:e,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:l,maxRadius:t.maxRadius}),a.createElement(eK,eM({},r,{id:e})),a.createElement(eq,eM({},r,{id:e}))))}eY.displayName="Pie";var eJ=a,eX=e.i(86031),eZ=e.i(62728),eH=e.i(41818),eQ=e.i(59798),e0=e.i(91526),e1=e.i(42221),e2=(e,t,a)=>(0,K.selectAxisWithScale)(e,"xAxis",(0,e1.selectXAxisIdFromGraphicalItemId)(e,t),a),e5=(e,t,a)=>(0,K.selectTicksOfGraphicalItem)(e,"xAxis",(0,e1.selectXAxisIdFromGraphicalItemId)(e,t),a),e6=(e,t,a)=>(0,K.selectAxisWithScale)(e,"yAxis",(0,e1.selectYAxisIdFromGraphicalItemId)(e,t),a),e3=(e,t,a)=>(0,K.selectTicksOfGraphicalItem)(e,"yAxis",(0,e1.selectYAxisIdFromGraphicalItemId)(e,t),a),e4=(0,R.createSelector)([F.selectChartLayout,e2,e6,e5,e3],(e,t,a,s,r)=>(0,B.isCategoricalAxis)(e,"xAxis")?(0,B.getBandSizeOfAxis)(t,s,!1):(0,B.getBandSizeOfAxis)(a,r,!1)),e8=(0,R.createSelector)([K.selectUnfilteredCartesianItems,(e,t)=>t],(e,t)=>e.filter(e=>"area"===e.type).find(e=>e.id===t)),e7=e=>{var t=(0,F.selectChartLayout)(e);return(0,B.isCategoricalAxis)(t,"xAxis")?"yAxis":"xAxis"},e9=(0,R.createSelector)([e8,(e,t,a)=>(0,K.selectStackGroups)(e,e7(e),"yAxis"===e7(e)?(0,e1.selectYAxisIdFromGraphicalItemId)(e,t):(0,e1.selectXAxisIdFromGraphicalItemId)(e,t),a)],(e,t)=>{if(null!=e&&null!=t){var a,{stackId:s}=e,r=(0,e0.getStackSeriesIdentifier)(e);if(null!=s&&null!=r){var l=null==(a=t[s])?void 0:a.stackedData,i=null==l?void 0:l.find(e=>e.key===r);if(null!=i)return i.map(e=>[e[0],e[1]])}}}),te=(0,R.createSelector)([F.selectChartLayout,e2,e6,e5,e3,e9,L.selectChartDataWithIndexesIfNotInPanoramaPosition3,e4,e8,G.selectChartBaseValue],(e,t,a,s,r,l,i,n,d,o)=>{var c,{chartData:m,dataStartIndex:x,dataEndIndex:p}=i;if(null!=d&&("horizontal"===e||"vertical"===e)&&null!=t&&null!=a&&null!=s&&null!=r&&0!==s.length&&0!==r.length&&null!=n){var{data:u}=d;if(null!=(c=u&&u.length>0?u:null==m?void 0:m.slice(x,p+1)))return function(e){var t,{areaSettings:{connectNulls:a,baseValue:s,dataKey:r},stackedData:l,layout:i,chartBaseValue:n,xAxis:d,yAxis:o,displayedData:c,dataStartIndex:m,xAxisTicks:x,yAxisTicks:p,bandSize:u}=e,h=l&&l.length,g=((e,t,a,s,r)=>{var l=null!=a?a:t;if((0,eh.isNumber)(l))return l;var i="horizontal"===e?r:s,n=i.scale.domain();if("number"===i.type){var d=Math.max(n[0],n[1]),o=Math.min(n[0],n[1]);return"dataMin"===l?o:"dataMax"===l||d<0?d:Math.max(Math.min(n[0],n[1]),0)}return"dataMin"===l?n[0]:"dataMax"===l?n[1]:n[0]})(i,n,s,d,o),b="horizontal"===i,y=!1,f=c.map((e,t)=>{if(h)n=l[m+t];else{var s,i,n,c=(0,B.getValueByDataKey)(e,r);Array.isArray(c)?(n=c,y=!0):n=[g,c]}var f=null!=(s=null==(i=n)?void 0:i[1])?s:null,v=null==f||h&&!a&&null==(0,B.getValueByDataKey)(e,r);return b?{x:(0,B.getCateCoordinateOfLine)({axis:d,ticks:x,bandSize:u,entry:e,index:t}),y:v?null:o.scale(f),value:n,payload:e}:{x:v?null:d.scale(f),y:(0,B.getCateCoordinateOfLine)({axis:o,ticks:p,bandSize:u,entry:e,index:t}),value:n,payload:e}});return t=h||y?f.map(e=>{var t=Array.isArray(e.value)?e.value[0]:null;return b?{x:e.x,y:null!=t&&null!=e.y?o.scale(t):null,payload:e.payload}:{x:null!=t?d.scale(t):null,y:e.y,payload:e.payload}}):b?o.scale(g):d.scale(g),{points:f,baseLine:t,isRange:y}}({layout:e,xAxis:t,yAxis:a,xAxisTicks:s,yAxisTicks:r,dataStartIndex:x,areaSettings:d,stackedData:l,displayedData:c,chartBaseValue:o,bandSize:n})}}),tt=e.i(75337),ta=e.i(75502),ts=e.i(22075),tr=e.i(52734),tl=e.i(81583),ti=e.i(43404),tn=e.i(20135),td=["id"],to=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function tc(){return(tc=Object.assign.bind()).apply(null,arguments)}function tm(e,t){if(null==e)return{};var a,s,r=function(e,t){if(null==e)return{};var a={};for(var s in e)if(({}).hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)a=l[s],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function tx(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function tp(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tx(Object(a),!0).forEach(function(t){var s,r,l;s=e,r=t,l=a[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tx(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function tu(e,t){return e&&"none"!==e?e:t}var th=eJ.memo(e=>{var{dataKey:t,data:a,stroke:s,strokeWidth:r,fill:l,name:i,hide:n,unit:d,tooltipType:o,id:c}=e,m={dataDefinedOnItem:a,positions:void 0,settings:{stroke:s,strokeWidth:r,fill:l,dataKey:t,nameKey:void 0,name:(0,B.getTooltipNameProp)(i,t),hide:n,type:o,color:tu(s,l),unit:d,graphicalItemId:c}};return eJ.createElement(ef.SetTooltipEntrySettings,{tooltipEntrySettings:m})});function tg(e){var{clipPathId:t,points:a,props:s}=e,{needClip:r,dot:l,dataKey:i}=s,n=(0,eS.svgPropertiesNoEvents)(s);return eJ.createElement(eX.Dots,{points:a,dot:l,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:i,baseProps:n,needClip:r,clipPathId:t})}function tb(e){var{showLabels:t,children:a,points:s}=e,r=s.map(e=>{var t,a,s={x:null!=(t=e.x)?t:0,y:null!=(a=e.y)?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return tp(tp({},s),{},{value:e.value,payload:e.payload,parentViewBox:void 0,viewBox:s,fill:void 0})});return eJ.createElement(eE.CartesianLabelListContextProvider,{value:t?r:void 0},a)}function ty(e){var{points:t,baseLine:a,needClip:s,clipPathId:r,props:l}=e,{layout:i,type:n,stroke:d,connectNulls:o,isRange:c}=l,{id:m}=l,x=tm(l,td),p=(0,eS.svgPropertiesNoEvents)(x),u=(0,ti.svgPropertiesAndEvents)(x);return eJ.createElement(eJ.Fragment,null,(null==t?void 0:t.length)>1&&eJ.createElement(eo.Layer,{clipPath:s?"url(#clipPath-".concat(r,")"):void 0},eJ.createElement(ec.Curve,tc({},u,{id:m,points:t,connectNulls:o,type:n,baseLine:a,layout:i,stroke:"none",className:"recharts-area-area"})),"none"!==d&&eJ.createElement(ec.Curve,tc({},p,{className:"recharts-area-curve",layout:i,type:n,connectNulls:o,fill:"none",points:t})),"none"!==d&&c&&eJ.createElement(ec.Curve,tc({},p,{className:"recharts-area-curve",layout:i,type:n,connectNulls:o,fill:"none",points:a}))),eJ.createElement(tg,{points:t,props:x,clipPathId:r}))}function tf(e){var t,a,{alpha:s,baseLine:r,points:l,strokeWidth:i}=e,n=null==(t=l[0])?void 0:t.y,d=null==(a=l[l.length-1])?void 0:a.y;if(!(0,ts.isWellBehavedNumber)(n)||!(0,ts.isWellBehavedNumber)(d))return null;var o=s*Math.abs(n-d),c=Math.max(...l.map(e=>e.x||0));return((0,eh.isNumber)(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(e=>e.x||0),c)),(0,eh.isNumber)(c))?eJ.createElement("rect",{x:0,y:n<d?n:n-o,width:c+(i?parseInt("".concat(i),10):1),height:Math.floor(o)}):null}function tv(e){var t,a,{alpha:s,baseLine:r,points:l,strokeWidth:i}=e,n=null==(t=l[0])?void 0:t.x,d=null==(a=l[l.length-1])?void 0:a.x;if(!(0,ts.isWellBehavedNumber)(n)||!(0,ts.isWellBehavedNumber)(d))return null;var o=s*Math.abs(n-d),c=Math.max(...l.map(e=>e.y||0));return((0,eh.isNumber)(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(e=>e.y||0),c)),(0,eh.isNumber)(c))?eJ.createElement("rect",{x:n<d?n:n-o,y:0,width:o,height:Math.floor(c+(i?parseInt("".concat(i),10):1))}):null}function tj(e){var{alpha:t,layout:a,points:s,baseLine:r,strokeWidth:l}=e;return"vertical"===a?eJ.createElement(tf,{alpha:t,points:s,baseLine:r,strokeWidth:l}):eJ.createElement(tv,{alpha:t,points:s,baseLine:r,strokeWidth:l})}function tN(e){var{needClip:t,clipPathId:a,props:s,previousPointsRef:r,previousBaselineRef:l}=e,{points:i,baseLine:n,isAnimationActive:d,animationBegin:o,animationDuration:c,animationEasing:m,onAnimationStart:x,onAnimationEnd:p}=s,u=(0,eJ.useMemo)(()=>({points:i,baseLine:n}),[i,n]),h=(0,eA.useAnimationId)(u,"recharts-area-"),g=(0,F.useCartesianChartLayout)(),[b,y]=(0,eJ.useState)(!1),f=(0,eJ.useCallback)(()=>{"function"==typeof p&&p(),y(!1)},[p]),v=(0,eJ.useCallback)(()=>{"function"==typeof x&&x(),y(!0)},[x]);if(null==g)return null;var j=r.current,N=l.current;return eJ.createElement(tb,{showLabels:!b,points:i},s.children,eJ.createElement(eP.JavascriptAnimate,{animationId:h,begin:o,duration:c,isActive:d,easing:m,onAnimationEnd:f,onAnimationStart:v,key:h},e=>{if(j){var o,c=j.length/i.length,m=1===e?i:i.map((t,a)=>{var s=Math.floor(a*c);if(j[s]){var r=j[s];return tp(tp({},t),{},{x:(0,eh.interpolate)(r.x,t.x,e),y:(0,eh.interpolate)(r.y,t.y,e)})}return t});return o=(0,eh.isNumber)(n)?(0,eh.interpolate)(N,n,e):(0,eh.isNullish)(n)||(0,eh.isNan)(n)?(0,eh.interpolate)(N,0,e):n.map((t,a)=>{var s=Math.floor(a*c);if(Array.isArray(N)&&N[s]){var r=N[s];return tp(tp({},t),{},{x:(0,eh.interpolate)(r.x,t.x,e),y:(0,eh.interpolate)(r.y,t.y,e)})}return t}),e>0&&(r.current=m,l.current=o),eJ.createElement(ty,{points:m,baseLine:o,needClip:t,clipPathId:a,props:s})}return e>0&&(r.current=i,l.current=n),eJ.createElement(eo.Layer,null,d&&eJ.createElement("defs",null,eJ.createElement("clipPath",{id:"animationClipPath-".concat(a)},eJ.createElement(tj,{alpha:e,points:i,baseLine:n,layout:g,strokeWidth:s.strokeWidth}))),eJ.createElement(eo.Layer,{clipPath:"url(#animationClipPath-".concat(a,")")},eJ.createElement(ty,{points:i,baseLine:n,needClip:t,clipPathId:a,props:s})))}),eJ.createElement(eE.LabelListFromLabelProp,{label:s.label}))}function tA(e){var{needClip:t,clipPathId:a,props:s}=e,r=(0,eJ.useRef)(null),l=(0,eJ.useRef)();return eJ.createElement(tN,{needClip:t,clipPathId:a,props:s,previousPointsRef:r,previousBaselineRef:l})}class tw extends eJ.PureComponent{render(){var{hide:e,dot:t,points:a,className:s,top:r,left:l,needClip:i,xAxisId:n,yAxisId:d,width:o,height:c,id:m,baseLine:x,zIndex:p}=this.props;if(e)return null;var u=(0,C.clsx)("recharts-area",s),{r:h,strokeWidth:g}=(0,tl.getRadiusAndStrokeWidthFromDot)(t),b=(0,ep.isClipDot)(t),y=2*h+g,f=i?"url(#clipPath-".concat(b?"":"dots-").concat(m,")"):void 0;return eJ.createElement(eT.ZIndexLayer,{zIndex:p},eJ.createElement(eo.Layer,{className:u},i&&eJ.createElement("defs",null,eJ.createElement(eQ.GraphicalItemClipPath,{clipPathId:m,xAxisId:n,yAxisId:d}),!b&&eJ.createElement("clipPath",{id:"clipPath-dots-".concat(m)},eJ.createElement("rect",{x:l-y/2,y:r-y/2,width:o+y,height:c+y}))),eJ.createElement(tA,{needClip:i,clipPathId:m,props:this.props})),eJ.createElement(eH.ActivePoints,{points:a,mainColor:tu(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:f}),this.props.isRange&&Array.isArray(x)&&eJ.createElement(eH.ActivePoints,{points:x,mainColor:tu(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:f}))}}var tk={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:eI.DefaultZIndexes.area};function tS(e){var t,a=(0,A.resolveDefaultProps)(e,tk),{activeDot:s,animationBegin:r,animationDuration:l,animationEasing:i,connectNulls:n,dot:d,fill:o,fillOpacity:c,hide:m,isAnimationActive:x,legendType:p,stroke:u,xAxisId:h,yAxisId:g}=a,b=tm(a,to),y=(0,F.useChartLayout)(),v=(0,ta.useChartName)(),{needClip:j}=(0,eQ.useNeedsClip)(h,g),N=(0,tt.useIsPanorama)(),{points:w,isRange:k,baseLine:S}=null!=(t=(0,f.useAppSelector)(t=>te(t,e.id,N)))?t:{},P=(0,tr.usePlotArea)();if("horizontal"!==y&&"vertical"!==y||null==P||"AreaChart"!==v&&"ComposedChart"!==v)return null;var{height:E,width:T,x:I,y:O}=P;return w&&w.length?eJ.createElement(tw,tc({},b,{activeDot:s,animationBegin:r,animationDuration:l,animationEasing:i,baseLine:S,connectNulls:n,dot:d,fill:o,fillOpacity:c,height:E,hide:m,layout:y,isAnimationActive:"auto"===x?!eZ.Global.isSsr:x,isRange:k,legendType:p,needClip:j,points:w,stroke:u,width:T,left:I,top:O,xAxisId:h,yAxisId:g})):null}var tP=eJ.memo(function(e){var t=(0,A.resolveDefaultProps)(e,tk),a=(0,tt.useIsPanorama)();return eJ.createElement(ew.RegisterGraphicalItemId,{id:t.id,type:"area"},e=>eJ.createElement(eJ.Fragment,null,eJ.createElement(ej.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:s,fill:r,legendType:l,hide:i}=e;return[{inactive:i,dataKey:t,type:l,color:tu(s,r),value:(0,B.getTooltipNameProp)(a,t),payload:e}]})(t)}),eJ.createElement(th,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),eJ.createElement(ek.SetCartesianGraphicalItem,{type:"area",id:e,data:t.data,dataKey:t.dataKey,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,stackId:(0,B.getNormalizedStackId)(t.stackId),hide:t.hide,barSize:void 0,baseValue:t.baseValue,isPanorama:a,connectNulls:t.connectNulls}),eJ.createElement(tS,tc({},t,{id:e}))))},tn.propsAreEqual);tP.displayName="Area";let tE=(0,s.default)(()=>e.A(6925),{loadableGenerated:{modules:[5648]},ssr:!1});function tT(){let e,s=(0,r.useRouter)(),u=(0,r.useParams)(),h=u?.projectId,[g,b]=(0,a.useState)("Project"),[y,f]=(0,a.useState)([]),[v,j]=(0,a.useState)([]),[N,A]=(0,a.useState)([]),[w,k]=(0,a.useState)([]),[S,P]=(0,a.useState)([]),[E,T]=(0,a.useState)(!0),[I,O]=(0,a.useState)("overview"),[_,C]=(0,a.useState)(""),[R,L]=(0,a.useState)(null),[M,B]=(0,a.useState)([]),[K,F]=(0,a.useState)({}),[$,U]=(0,a.useState)([]),[G,W]=(0,a.useState)(null),[V,z]=(0,a.useState)(null),[q,Y]=(0,a.useState)(null),[J,X]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{let{data:e}=await l.supabase.auth.getSession();if(!e?.session)return s.push("/");h&&(await Q(),await ee(),T(!1))})()},[h,s]),(0,a.useEffect)(()=>{let e=localStorage.getItem("userEmail"),t=localStorage.getItem("userProfile"),a=localStorage.getItem("userRole");z(e),Y(t),X(a)},[]);let Z=e=>{if(null==e||""===e)return 0;"string"==typeof e&&(e=(e=e.replace(",",".")).replace(/[^\d.-]/g,""));let t=Number(e);return isNaN(t)?0:parseFloat(t.toFixed(2))},H=e=>{let t={},a=0;return M.forEach(s=>{let r=e.reduce((e,t)=>e+Z(t.dates?.[s]),0);a+=r,t[s]=a}),t},Q=async()=>{if(!h)return;let{data:e,error:t}=await l.supabase.from("projects").select("name, meta, created_at, deadline").eq("id",h).single();e?b(e.name||`Project ${h}`):b(`Project ${h}`);let a=`silver:${h}:meta_project`,s=localStorage.getItem(a);if(s)try{let t=JSON.parse(s);t&&"object"==typeof t?F(t):e?.meta&&"object"==typeof e.meta&&F(e.meta)}catch(t){console.warn("invalid meta project:",t),e?.meta&&"object"==typeof e.meta&&F(e.meta)}else e?.meta&&"object"==typeof e.meta&&F(e.meta);let r=(await l.supabase.from("tasks").select("*").eq("project_id",h).order("row_index",{ascending:!0})).data||[];f(r);let i=`silver:${h}:date_cols`,n=localStorage.getItem(i);if(n)try{let e=JSON.parse(n);Array.isArray(e)&&B(e)}catch(e){console.warn("invalid date columns:",e)}else{let e=new Set;r.forEach(t=>{t.dates&&Object.keys(t.dates).forEach(t=>e.add(t))}),B(Array.from(e))}let d=`silver:${h}:target_rows`,o=`silver:${h}:realisasi_rows`,c=`silver:${h}:rows`,m=localStorage.getItem(c);if(m)try{let e=JSON.parse(m);if(Array.isArray(e)&&e.length){let t=new Map;r.forEach(e=>{null!==e.row_index&&void 0!==e.row_index&&t.set(Number(e.row_index),e)});let a=e.map((e,a)=>{let s=Number(e.row_index??a+1);return{...t.get(s),...e}});f(a)}}catch(e){console.warn("invalid local rows:",e)}let x=localStorage.getItem(d);if(x)try{let e=JSON.parse(x);Array.isArray(e)&&j(e)}catch(e){console.warn("invalid target data:",e)}let p=localStorage.getItem(o);if(p)try{let e=JSON.parse(p);Array.isArray(e)&&A(e)}catch(e){console.warn("invalid realisasi data:",e)}k((await l.supabase.from("shipments").select("*").eq("project_id",h).order("created_at",{ascending:!1})).data||[]),P((await l.supabase.from("project_notes").select("*").eq("project_id",h).order("created_at",{ascending:!1})).data||[]),et()},ee=async()=>{try{let e=new Date(Date.now()-3e5).toISOString(),{data:t,error:a}=await l.supabase.from("user_presence").select("*").eq("project_id",h).gte("last_seen",e).order("last_seen",{ascending:!1});if(a)return void console.log("Database error in loadOnlineUsers:",a);if(t){let e=t.map(e=>e);U(e)}}catch(e){console.log("Exception in loadOnlineUsers:",e)}},et=()=>{if(!h)return;let e=l.supabase.channel(`public:tasks:project_${h}`).on("postgres_changes",{event:"*",schema:"public",table:"tasks",filter:`project_id=eq.${h}`},e=>{if("UPDATE"===e.eventType||"INSERT"===e.eventType)f(t=>{let a=e.new;return t.find(e=>e.id===a.id)?t.map(e=>e.id===a.id?a:e):[a,...t]});else if("DELETE"===e.eventType){let t=e.old?.id;t&&f(e=>e.filter(e=>e.id!==t))}}).subscribe(),t=l.supabase.channel(`public:shipments:project_${h}`).on("postgres_changes",{event:"*",schema:"public",table:"shipments",filter:`project_id=eq.${h}`},e=>{if(e.new){let t=e.new;k(e=>e.find(e=>e.id===t.id)?e.map(e=>e.id===t.id?t:e):[t,...e].slice(0,100))}else if("DELETE"===e.eventType){let t=e.old?.id;t&&k(e=>e.filter(e=>e.id!==t))}}).subscribe(),a=l.supabase.channel(`public:project_notes:project_${h}`).on("postgres_changes",{event:"*",schema:"public",table:"project_notes",filter:`project_id=eq.${h}`},e=>{if(e.new){let t=e.new;P(e=>e.find(e=>e.id===t.id)?e.map(e=>e.id===t.id?t:e):[t,...e])}else if("DELETE"===e.eventType){let t=e.old?.id;t&&P(e=>e.filter(e=>e.id!==t))}}).subscribe(),s=l.supabase.channel(`user_presence:project_${h}`).on("postgres_changes",{event:"*",schema:"public",table:"user_presence",filter:`project_id=eq.${h}`},e=>{ee()}).subscribe();return()=>{l.supabase.removeChannel(e),l.supabase.removeChannel(t),l.supabase.removeChannel(a),l.supabase.removeChannel(s)}},ea=(0,a.useMemo)(()=>{if(!M.length)return[];let e=[];y.forEach((t,a)=>{let s=t.description||`Task ${a+1}`;M.forEach((r,l)=>{let i=Z(t.dates?.[r]),n=0;for(let e=0;e<l;e++){let a=M[e];n+=Z(t.dates?.[a])}i>0&&e.push({date:r,task:s,progress:i,rowIndex:a,cumulative:n+i})})});let t=new Map;return e.forEach(e=>{t.has(e.date)||t.set(e.date,{date:e.date,totalProgress:0,tasks:{}});let a=t.get(e.date);a.tasks[e.task]=e.progress,a.totalProgress=e.cumulative}),Array.from(t.values())},[y,M]),es=(0,a.useMemo)(()=>{if(!M.length)return[];let e=[];v.forEach((t,a)=>{let s=t.description||`Task ${a+1}`;M.forEach((r,l)=>{let i=Z(t.dates?.[r]),n=0;for(let e=0;e<l;e++){let a=M[e];n+=Z(t.dates?.[a])}i>0&&e.push({date:r,task:s,progress:i,rowIndex:a,cumulative:n+i})})});let t=new Map;return e.forEach(e=>{t.has(e.date)||t.set(e.date,{date:e.date,totalProgress:0,tasks:{}});let a=t.get(e.date);a.tasks[e.task]=e.progress,a.totalProgress=e.cumulative}),Array.from(t.values())},[v,M]),er=(0,a.useMemo)(()=>{if(!M.length)return[];let e=[];N.forEach((t,a)=>{let s=t.description||`Task ${a+1}`;M.forEach((r,l)=>{let i=Z(t.dates?.[r]),n=0;for(let e=0;e<l;e++){let a=M[e];n+=Z(t.dates?.[a])}i>0&&e.push({date:r,task:s,progress:i,rowIndex:a,cumulative:n+i})})});let t=new Map;return e.forEach(e=>{t.has(e.date)||t.set(e.date,{date:e.date,totalProgress:0,tasks:{}});let a=t.get(e.date);a.tasks[e.task]=e.progress,a.totalProgress=e.cumulative}),Array.from(t.values())},[N,M]);(0,a.useMemo)(()=>y.map((e,t)=>({name:`${t+1}`,Plan:Number(e.plan_progress??0),Actual:Number(e.actual_progress??0),description:e.description?.substring(0,20)||`Task ${t+1}`,weight:Number(e.weight??0)})),[y]);let el=(0,a.useMemo)(()=>{let e=y.reduce((e,t)=>e+Z(t.weight),0),t=H(y)[M[M.length-1]]||0;return{plan:t,actual:t,target:H(v)[M[M.length-1]]||0,realisasi:H(N)[M[M.length-1]]||0,totalWeight:e,isValidWeight:e<=100,totalTasks:y.length+v.length+N.length,completedTasks:y.filter(e=>Z(e.actual_progress)>=100).length+v.filter(e=>Z(e.plan_progress)>=100).length+N.filter(e=>Z(e.actual_progress)>=100).length,totalUploaded:y.filter(e=>e.proof_url||e.is_uploaded).length+v.filter(e=>e.proof_url||e.is_uploaded).length+N.filter(e=>e.proof_url||e.is_uploaded).length}},[y,v,N,M]),ei=(0,a.useMemo)(()=>Object.entries(y.reduce((e,t)=>{let a=Z(t.actual_progress),s="Not Started";return a>0&&a<100?s="In Progress":a>=100&&(s="Completed"),e[s]=(e[s]||0)+1,e},{})).map(([e,t])=>({name:e,value:t})),[y]),en=["#0088FE","#00C49F","#FFBB28","#FF8042"],ed=async()=>{if(!_.trim()||!h)return;let{data:e}=await l.supabase.auth.getUser(),t=e.user?.id,a=null;if(R)try{let e=encodeURIComponent(h),t=`${Date.now()}_${R.name}`,s=`${e}/notes/${t}`,{data:r,error:i}=await l.supabase.storage.from("proofs").upload(s,R);if(i)throw console.error("Error uploading audio:",i),i;let{data:n}=l.supabase.storage.from("proofs").getPublicUrl(s);n.publicUrl&&(a=n.publicUrl)}catch(e){console.error("Error uploading audio:",e)}let{error:s}=await l.supabase.from("project_notes").insert({project_id:h,content:_,audio_url:a,created_by:t||"unknown"});s?console.error("Error saving note:",s):(C(""),L(null))},eo=(e,a,s=!0,r=!0)=>{let l=H(e);return(0,t.jsxs)("div",{className:"bg-white rounded shadow mb-6",children:[(0,t.jsxs)("div",{className:"bg-gray-50 border-b p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg",children:a}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Total Data: ",e.length," rows | Total Progress: ",l[M[M.length-1]]?.toFixed(2)||"0","%"]})]}),(0,t.jsx)("div",{className:"overflow-auto max-h-[500px]",children:(0,t.jsxs)("table",{className:"min-w-full border text-sm text-gray-700",children:[(0,t.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border px-2 py-2 text-center w-12",children:"NO"}),(0,t.jsx)("th",{className:"border px-3 py-2 text-left min-w-[200px]",children:"DESCRIPTION"}),(0,t.jsx)("th",{className:"border px-2 py-2 text-center min-w-[80px]",children:"BOBOT %"}),s&&(0,t.jsx)("th",{className:"border px-2 py-2 text-center min-w-[100px]",children:"TARGET %"}),r&&(0,t.jsx)("th",{className:"border px-2 py-2 text-center min-w-[100px]",children:"REALISASI %"}),(0,t.jsx)("th",{className:"border px-2 py-2 text-center min-w-[150px]",children:"LOKASI"}),M.map((e,a)=>(0,t.jsx)("th",{className:"border px-2 py-2 text-center min-w-[120px] text-xs",children:e||`Tanggal ${a+1}`},a)),(0,t.jsx)("th",{className:"border px-2 py-2 text-center min-w-[100px]",children:"UPLOAD"}),(0,t.jsx)("th",{className:"border px-2 py-2 text-center min-w-[80px]",children:"STATUS"})]})}),(0,t.jsx)("tbody",{children:0===e.length?(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:7+M.length,className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("div",{className:"text-2xl mb-2",children:"üìä"}),(0,t.jsx)("p",{children:"Belum ada data task"})]})}):(0,t.jsxs)(t.Fragment,{children:[e.map((e,a)=>{let l=r?Z(e.actual_progress):Z(e.plan_progress),i=l>=100,n=l>0&&l<100;return(0,t.jsxs)("tr",{className:`hover:bg-gray-50 ${i?"bg-green-50":n?"bg-yellow-50":"red"===e.color?"bg-red-50":"yellow"===e.color?"bg-yellow-50":"green"===e.color?"bg-green-50":""}`,children:[(0,t.jsx)("td",{className:"border px-2 py-2 text-center font-medium",children:a+1}),(0,t.jsxs)("td",{className:"border px-3 py-2 text-left",children:[(0,t.jsx)("div",{className:"font-medium",children:e.description||"-"}),e.row_index&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Row: ",e.row_index]})]}),(0,t.jsx)("td",{className:"border px-2 py-2 text-center",children:(0,t.jsxs)("span",{className:"font-semibold",children:[Z(e.weight).toFixed(1),"%"]})}),s&&(0,t.jsx)("td",{className:"border px-2 py-2 text-center",children:(0,t.jsxs)("span",{className:`px-2 py-1 rounded text-xs ${Z(e.plan_progress)>=100?"bg-green-100 text-green-800":Z(e.plan_progress)>0?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[Z(e.plan_progress).toFixed(1),"%"]})}),r&&(0,t.jsx)("td",{className:"border px-2 py-2 text-center",children:(0,t.jsxs)("span",{className:`px-2 py-1 rounded text-xs ${Z(e.actual_progress)>=100?"bg-green-100 text-green-800":Z(e.actual_progress)>0?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[Z(e.actual_progress).toFixed(1),"%"]})}),(0,t.jsx)("td",{className:"border px-2 py-2 text-center text-xs",children:e.location?(0,t.jsxs)("span",{className:"text-blue-600",title:e.location,children:["üìç ",e.location.length>20?e.location.substring(0,20)+"...":e.location]}):"-"}),M.map((a,s)=>(0,t.jsx)("td",{className:"border px-2 py-2 text-center text-xs",children:e.dates?.[a]?Z(e.dates[a]).toFixed(1):"-"},s)),(0,t.jsx)("td",{className:"border px-2 py-2 text-center",children:e.proof_url||e.is_uploaded?(0,t.jsx)("a",{href:e.proof_url||"#",target:"_blank",rel:"noopener noreferrer",className:"text-green-600 hover:text-green-800 text-xs font-medium",children:"‚úÖ Uploaded"}):(0,t.jsx)("span",{className:"text-red-600 text-xs",children:"‚ùå Belum"})}),(0,t.jsx)("td",{className:"border px-2 py-2 text-center",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs ${i?"bg-green-100 text-green-800":n?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:i?"Selesai":n?"Progress":"Belum"})})]},e.id||a)}),(0,t.jsxs)("tr",{className:"bg-blue-50 font-semibold",children:[(0,t.jsx)("td",{className:"border px-2 py-2 text-center",colSpan:2,children:"TOTAL %"}),(0,t.jsxs)("td",{className:"border px-2 py-2 text-center",children:[e.reduce((e,t)=>e+Z(t.weight),0).toFixed(1),"%"]}),s&&(0,t.jsxs)("td",{className:"border px-2 py-2 text-center",children:[e.reduce((e,t)=>e+Z(t.plan_progress),0).toFixed(1),"%"]}),r&&(0,t.jsxs)("td",{className:"border px-2 py-2 text-center",children:[e.reduce((e,t)=>e+Z(t.actual_progress),0).toFixed(1),"%"]}),(0,t.jsx)("td",{className:"border px-2 py-2 text-center",children:"-"}),M.map((e,a)=>(0,t.jsxs)("td",{className:"border px-2 py-2 text-center font-medium",children:[l[e]?.toFixed(1)||"0.0","%"]},a)),(0,t.jsxs)("td",{className:"border px-2 py-2 text-center",colSpan:2,children:[e.filter(e=>e.proof_url||e.is_uploaded).length," / ",e.length]})]})]})})]})})]})};return E?(0,t.jsx)("div",{className:"flex items-center justify-center h-screen text-gray-600",children:"Memuat data master dashboard..."}):(0,t.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,t.jsx)("header",{className:"mb-6",children:(0,t.jsxs)("div",{className:"flex justify-between items-center bg-blue-800 text-white p-4 rounded-md shadow",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"bg-white p-2 rounded",children:(0,t.jsx)("div",{className:"text-blue-800 font-bold text-lg",children:"MASTER"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold",children:["PT ELEKTRINDO UTAMA INDONESIA",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-sm font-normal",children:"MECHANICAL ‚Äì ELECTRICAL ‚Äì FIRE PROTECTION SYSTEM"})]}),(0,t.jsxs)("div",{className:"mt-2 text-blue-200",children:[(0,t.jsx)("strong",{children:"MASTER MONITORING DASHBOARD"})," ‚Äî ",g]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,t.jsx)(()=>V?(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-blue-50 px-3 py-2 rounded-lg border border-blue-200",children:[(0,t.jsx)("img",{src:q||`https://ui-avatars.com/api/?name=${encodeURIComponent(V.split("@")[0])}&background=random`,alt:"Profile",className:"w-8 h-8 rounded-full",onError:e=>{e.target.src=`https://ui-avatars.com/api/?name=${encodeURIComponent(V.split("@")[0])}&background=random`}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-800",children:V}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 capitalize",children:[J||"user"," - Master Dashboard"]})]})]}):null,{}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>window.open(`/silver/${h}`,"_blank"),className:"bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-sm font-medium",children:"Buka Silver App"}),(0,t.jsx)("button",{onClick:()=>s.push("/projects"),className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-sm font-medium",children:"Kembali ke Projects"})]})]})]})}),(0,t.jsx)(()=>{let[e,s]=(0,a.useState)(!1);return(0,t.jsxs)("div",{className:"bg-white p-3 rounded shadow mb-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"font-semibold text-sm",children:"üë• User Online di Silver App"}),(0,t.jsx)("button",{onClick:()=>s(!e),className:"px-2 py-1 bg-blue-100 hover:bg-blue-200 rounded text-xs flex items-center gap-1",children:e?"‚ñ≤ Sembunyikan":"‚ñº Tampilkan"})]}),e&&(0,t.jsxs)("div",{className:"mt-2 space-y-2",children:[$.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-gray-50 rounded border",children:[(0,t.jsxs)("div",{className:"w-8 h-8 rounded-full bg-blue-500 flex items-center justify-center text-white text-xs font-bold",children:[e.user_metadata?.avatar_url?(0,t.jsx)("img",{src:e.user_metadata.avatar_url,alt:e.user_metadata.full_name||e.email,className:"w-8 h-8 rounded-full object-cover",onError:e=>{e.target.style.display="none"}}):null,(0,t.jsx)("div",{className:e.user_metadata?.avatar_url?"hidden":"",children:e.email.charAt(0).toUpperCase()})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"text-xs font-medium truncate",children:[e.user_metadata?.full_name||e.email,e.id===G?.id&&(0,t.jsx)("span",{className:"ml-1 text-blue-600 text-xs",children:"(Anda)"})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 truncate",children:["1"===e.active_tab&&"üìã Tab Planning","2"===e.active_tab&&"üìç Tab Lokasi","3"===e.active_tab&&"üéØ Tab Target","4"===e.active_tab&&"üìä Tab Realisasi","5"===e.active_tab&&"üìù Tab Catatan",e.editing_task&&` - Edit: ${e.editing_task}`]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Online"})]})]},e.id)),0===$.length&&(0,t.jsxs)("div",{className:"text-center py-4 text-gray-500",children:[(0,t.jsx)("div",{className:"text-2xl mb-1",children:"üëª"}),(0,t.jsx)("p",{children:"Tidak ada user online di Silver App"})]})]})]})},{}),(0,t.jsxs)("div",{className:"bg-white p-4 rounded shadow mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"üìã Informasi Proyek"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:"Sinkron dengan Silver App"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"KODE PROYEK"}),(0,t.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:K.project_code||"P-EUI-000-Tanggal"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"JOB NAME"}),(0,t.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:K.job_name||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"CLIENT"}),(0,t.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:K.client||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"ALAMAT"}),(0,t.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:K.address||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"TANGGAL"}),(0,t.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:K.date||"-"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"DEADLINE"}),(0,t.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:K.deadline||"-"})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"TIME SCHEDULE"}),(0,t.jsx)("div",{className:"font-semibold text-gray-800 p-2 border rounded bg-gray-50 min-h-[42px]",children:K.time_schedule||"-"})]})]})]}),(0,t.jsx)("div",{className:"mb-6 bg-white rounded-lg shadow",children:(0,t.jsx)("div",{className:"flex border-b overflow-x-auto",children:[{id:"overview",label:"üìä Overview",icon:"üìä"},{id:"comparison",label:"üìà Perbandingan",icon:"üìà"},{id:"tasks",label:"üìã Semua Tasks",icon:"üìã"},{id:"location",label:"üó∫Ô∏è Lokasi",icon:"üó∫Ô∏è"},{id:"documents",label:"üìé Dokumen",icon:"üìé"},{id:"notes",label:"üìù Catatan",icon:"üìù"}].map(e=>(0,t.jsxs)("button",{onClick:()=>O(e.id),className:`flex items-center gap-2 px-6 py-3 border-b-2 font-medium text-sm whitespace-nowrap ${I===e.id?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,t.jsx)("span",{children:e.icon}),e.label]},e.id))})}),"overview"===I&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-blue-100 p-3",children:(0,t.jsx)("span",{className:"text-blue-600 text-xl",children:"üìà"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Progress Rencana"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[el.plan.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Dari ",y.length," tasks"]})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-green-100 p-3",children:(0,t.jsx)("span",{className:"text-green-600 text-xl",children:"üéØ"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Progress Target"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[el.target.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Dari ",v.length," tasks"]})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-red-100 p-3",children:(0,t.jsx)("span",{className:"text-red-600 text-xl",children:"‚úÖ"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Progress Realisasi"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[el.realisasi.toFixed(1),"%"]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Dari ",N.length," tasks"]})]})]})}),(0,t.jsx)("div",{className:"bg-white p-6 rounded-lg shadow border",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"rounded-full bg-purple-100 p-3",children:(0,t.jsx)("span",{className:"text-purple-600 text-xl",children:"üìä"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Upload"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:el.totalUploaded}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Dokumen terupload"})]})]})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Kurva S - Progress per Tanggal (Planning)"}),(0,t.jsx)("div",{style:{width:"100%",height:300},children:(0,t.jsx)(p.ResponsiveContainer,{children:ea.length>0?(0,t.jsxs)(m.LineChart,{data:ea,children:[(0,t.jsx)(i.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(n.XAxis,{dataKey:"date",angle:-45,textAnchor:"end",height:60,interval:0,tick:{fontSize:10}}),(0,t.jsx)(d.YAxis,{}),(0,t.jsx)(o.Tooltip,{}),(0,t.jsx)(c.Legend,{}),(0,t.jsx)(x.Line,{type:"monotone",dataKey:"totalProgress",stroke:"#3b82f6",strokeWidth:2,dot:{r:3},activeDot:{r:5},name:"Total Progress"})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"üìä"}),(0,t.jsx)("p",{children:"Belum ada data progress per tanggal"}),(0,t.jsx)("p",{className:"text-sm",children:"Data akan muncul setelah diisi di Silver App"})]})})})}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,t.jsx)("p",{children:"‚Ä¢ Menunjukkan progress kumulatif per tanggal dari tab Planning"}),(0,t.jsx)("p",{children:"‚Ä¢ Data sinkron real-time dengan Silver App"})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Distribusi Status Task (Planning)"}),(0,t.jsx)("div",{style:{width:"100%",height:300},children:(0,t.jsx)(p.ResponsiveContainer,{children:ei.length>0?(0,t.jsxs)(D,{children:[(0,t.jsx)(eY,{data:ei,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} (${(100*(t||0)).toFixed(0)}%)`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:ei.map((e,a)=>(0,t.jsx)(ex.Cell,{fill:en[a%en.length]},`cell-${a}`))}),(0,t.jsx)(o.Tooltip,{})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"üìã"}),(0,t.jsx)("p",{children:"Belum ada data task"}),(0,t.jsx)("p",{className:"text-sm",children:"Data akan muncul setelah diisi di Silver App"})]})})})}),(0,t.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:[(0,t.jsx)("p",{children:"‚Ä¢ Menunjukkan distribusi status task dari tab Planning"}),(0,t.jsx)("p",{children:"‚Ä¢ Update real-time saat tim lapangan mengupdate progress"})]})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Aktivitas Terkini"}),(0,t.jsxs)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:[w.slice(0,10).map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Update Lokasi Lapangan"}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:e.address})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[new Date(e.created_at).toLocaleTimeString("id-ID"),(0,t.jsx)("div",{className:"text-xs",children:new Date(e.created_at).toLocaleDateString("id-ID")})]})]},e.id)),S.slice(0,5).map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-blue-50 rounded",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"Catatan Lapangan"}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[e.content.substring(0,60),"..."]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Oleh: ",e.created_by]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleTimeString("id-ID")})]},e.id)),0===w.length&&0===S.length&&(0,t.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"üìù"}),(0,t.jsx)("p",{children:"Belum ada aktivitas terkini"}),(0,t.jsx)("p",{className:"text-sm",children:"Tim lapangan belum mengupdate data"})]})]})]})]}),"comparison"===I&&(0,t.jsxs)("div",{className:"space-y-6",children:[(e=M.map(e=>{let t=H(y)[e]||0,a=H(v)[e]||0,s=H(N)[e]||0;return{date:e,Planning:t,Target:a,Realisasi:s,Gap:Math.max(0,a-s)}}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-6",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"üìä Perbandingan Planning vs Target vs Realisasi"}),(0,t.jsx)("div",{style:{width:"100%",height:400},children:(0,t.jsx)(p.ResponsiveContainer,{children:(0,t.jsxs)(m.LineChart,{data:e,children:[(0,t.jsx)(i.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(n.XAxis,{dataKey:"date",angle:-45,textAnchor:"end",height:60,interval:0,tick:{fontSize:10}}),(0,t.jsx)(d.YAxis,{label:{value:"Progress (%)",angle:-90,position:"insideLeft",offset:-5,style:{textAnchor:"middle",fontSize:12}}}),(0,t.jsx)(o.Tooltip,{}),(0,t.jsx)(c.Legend,{}),(0,t.jsx)(x.Line,{type:"monotone",dataKey:"Planning",stroke:"#3b82f6",strokeWidth:3,dot:{r:4},activeDot:{r:6}}),(0,t.jsx)(x.Line,{type:"monotone",dataKey:"Target",stroke:"#10b981",strokeWidth:3,strokeDasharray:"5 5",dot:{r:4},activeDot:{r:6}}),(0,t.jsx)(x.Line,{type:"monotone",dataKey:"Realisasi",stroke:"#ef4444",strokeWidth:3,dot:{r:4},activeDot:{r:6}}),(0,t.jsx)(tP,{type:"monotone",dataKey:"Gap",stroke:"#f59e0b",fill:"#f59e0b",fillOpacity:.3,strokeWidth:1})]})})}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded border",children:[(0,t.jsx)("div",{className:"font-semibold text-blue-800",children:"Planning"}),(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[el.plan.toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Total progress dari tab Planning"})]}),(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded border",children:[(0,t.jsx)("div",{className:"font-semibold text-green-800",children:"Target"}),(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[el.target.toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Target yang ditetapkan"})]}),(0,t.jsxs)("div",{className:"p-3 bg-red-50 rounded border",children:[(0,t.jsx)("div",{className:"font-semibold text-red-800",children:"Realisasi"}),(0,t.jsxs)("div",{className:"text-2xl font-bold",children:[el.realisasi.toFixed(1),"%"]}),(0,t.jsx)("div",{className:"text-xs text-red-600 mt-1",children:"Progress aktual lapangan"})]})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 rounded border",children:(0,t.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,t.jsx)("strong",{children:"Keterangan:"})," Chart menunjukkan perbandingan progress antara planning (biru), target (hijau putus-putus), dan realisasi (merah). Area kuning menunjukkan gap antara target dan realisasi."]})})]})),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"üìà Kurva S Target"}),(0,t.jsx)("div",{style:{width:"100%",height:300},children:(0,t.jsx)(p.ResponsiveContainer,{children:es.length>0?(0,t.jsxs)(m.LineChart,{data:es,children:[(0,t.jsx)(i.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(n.XAxis,{dataKey:"date",angle:-45,textAnchor:"end",height:60,interval:0,tick:{fontSize:10}}),(0,t.jsx)(d.YAxis,{}),(0,t.jsx)(o.Tooltip,{}),(0,t.jsx)(c.Legend,{}),(0,t.jsx)(x.Line,{type:"monotone",dataKey:"totalProgress",stroke:"#10b981",strokeWidth:2,dot:{r:3},activeDot:{r:5},name:"Total Progress"})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"üéØ"}),(0,t.jsx)("p",{children:"Belum ada data target"}),(0,t.jsx)("p",{className:"text-sm",children:"Data akan muncul setelah diisi di Silver App Tab Target"})]})})})})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"üìà Kurva S Realisasi"}),(0,t.jsx)("div",{style:{width:"100%",height:300},children:(0,t.jsx)(p.ResponsiveContainer,{children:er.length>0?(0,t.jsxs)(m.LineChart,{data:er,children:[(0,t.jsx)(i.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(n.XAxis,{dataKey:"date",angle:-45,textAnchor:"end",height:60,interval:0,tick:{fontSize:10}}),(0,t.jsx)(d.YAxis,{}),(0,t.jsx)(o.Tooltip,{}),(0,t.jsx)(c.Legend,{}),(0,t.jsx)(x.Line,{type:"monotone",dataKey:"totalProgress",stroke:"#ef4444",strokeWidth:2,dot:{r:3},activeDot:{r:5},name:"Total Progress"})]}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"‚úÖ"}),(0,t.jsx)("p",{children:"Belum ada data realisasi"}),(0,t.jsx)("p",{className:"text-sm",children:"Data akan muncul setelah diisi di Silver App Tab Realisasi"})]})})})})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"üìä Statistik Perbandingan"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"p-3 bg-blue-50 rounded border",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Planning vs Target"}),(0,t.jsxs)("span",{className:`font-bold ${5>Math.abs(el.plan-el.target)?"text-green-600":"text-red-600"}`,children:[Math.abs(el.plan-el.target).toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:el.plan>=el.target?"Planning sesuai target":"Planning di bawah target"})]}),(0,t.jsxs)("div",{className:"p-3 bg-green-50 rounded border",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Target vs Realisasi"}),(0,t.jsxs)("span",{className:`font-bold ${5>Math.abs(el.target-el.realisasi)?"text-green-600":"text-red-600"}`,children:[Math.abs(el.target-el.realisasi).toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:el.realisasi>=el.target?"Realisasi sesuai target":"Realisasi di bawah target"})]}),(0,t.jsxs)("div",{className:"p-3 bg-yellow-50 rounded border",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"font-medium",children:"Planning vs Realisasi"}),(0,t.jsxs)("span",{className:`font-bold ${5>Math.abs(el.plan-el.realisasi)?"text-green-600":"text-red-600"}`,children:[Math.abs(el.plan-el.realisasi).toFixed(1),"%"]})]}),(0,t.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:el.realisasi>=el.plan?"Realisasi sesuai planning":"Realisasi di bawah planning"})]}),(0,t.jsxs)("div",{className:"p-3 bg-gray-50 rounded border",children:[(0,t.jsx)("div",{className:"font-medium mb-2",children:"Summary Progress"}),(0,t.jsxs)("div",{className:"text-sm space-y-1",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Total Bobot:"}),(0,t.jsxs)("span",{className:"font-semibold",children:[el.totalWeight.toFixed(1),"%"]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Status Bobot:"}),(0,t.jsx)("span",{className:`font-semibold ${el.isValidWeight?"text-green-600":"text-red-600"}`,children:el.isValidWeight?"VALID":"INVALID (>100%)"})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Total Tasks:"}),(0,t.jsx)("span",{className:"font-semibold",children:el.totalTasks})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Selesai:"}),(0,t.jsx)("span",{className:"font-semibold",children:el.completedTasks})]})]})]})]})]})]})]}),"tasks"===I&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"üìã Data Tasks dari Silver App"}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:"Data ini ditampilkan dari localStorage Silver App yang disinkronkan secara real-time. Anda dapat melihat semua tabel dari Planning, Target, dan Realisasi dalam satu dashboard."}),(0,t.jsxs)("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-3 gap-2 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,t.jsxs)("span",{children:["Planning: ",(0,t.jsx)("strong",{children:y.length})," tasks"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,t.jsxs)("span",{children:["Target: ",(0,t.jsx)("strong",{children:v.length})," tasks"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,t.jsxs)("span",{children:["Realisasi: ",(0,t.jsx)("strong",{children:N.length})," tasks"]})]})]})]}),eo(y,"Tabel Planning - Target vs Realisasi",!0,!0),eo(v,"Tabel Target",!0,!1),eo(N,"Tabel Realisasi",!1,!0)]}),"location"===I&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"üó∫Ô∏è Peta Tracking Real-time"}),(0,t.jsx)(tE,{projectId:h})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"üìã Riwayat Lokasi Lapangan"}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",w.length," lokasi"]})]}),(0,t.jsx)("div",{className:"overflow-auto max-h-[500px]",children:(0,t.jsxs)("table",{className:"min-w-full border text-sm",children:[(0,t.jsx)("thead",{className:"bg-gray-50 sticky top-0",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"border px-4 py-2",children:"Waktu"}),(0,t.jsx)("th",{className:"border px-4 py-2",children:"Lokasi"}),(0,t.jsx)("th",{className:"border px-4 py-2",children:"Koordinat"}),(0,t.jsx)("th",{className:"border px-4 py-2",children:"Akurasi"}),(0,t.jsx)("th",{className:"border px-4 py-2",children:"Status"}),(0,t.jsx)("th",{className:"border px-4 py-2",children:"Catatan"})]})}),(0,t.jsxs)("tbody",{children:[w.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"border px-4 py-2",children:[(0,t.jsx)("div",{className:"text-xs font-medium",children:new Date(e.created_at).toLocaleDateString("id-ID")}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleTimeString("id-ID")})]}),(0,t.jsx)("td",{className:"border px-4 py-2",children:e.address}),(0,t.jsxs)("td",{className:"border px-4 py-2 text-xs font-mono",children:[e.last_lat.toFixed(6),", ",e.last_lng.toFixed(6)]}),(0,t.jsx)("td",{className:"border px-4 py-2",children:(0,t.jsxs)("span",{className:`px-2 py-1 rounded text-xs ${e.accuracy<=10?"bg-green-100 text-green-800":e.accuracy<=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:[Math.round(e.accuracy),"m"]})}),(0,t.jsx)("td",{className:"border px-4 py-2",children:(0,t.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:e.status})}),(0,t.jsxs)("td",{className:"border px-4 py-2 text-xs",children:[e.item_name&&(0,t.jsx)("div",{className:"font-medium",children:e.item_name}),e.notes&&(0,t.jsx)("div",{className:"text-gray-600 mt-1",children:e.notes})]})]},e.id)),0===w.length&&(0,t.jsx)("tr",{children:(0,t.jsxs)("td",{colSpan:6,className:"text-center py-8 text-gray-500",children:[(0,t.jsx)("div",{className:"text-4xl mb-2",children:"üìç"}),(0,t.jsx)("p",{children:"Belum ada riwayat lokasi"}),(0,t.jsx)("p",{className:"text-sm",children:"Tim lapangan belum mengupdate lokasi"})]})})]})]})})]})]}),"documents"===I&&(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"üìé Dokumen & Bukti Upload dari Silver App"}),(0,t.jsx)("div",{className:"mb-4 p-3 bg-blue-50 rounded border",children:(0,t.jsx)("p",{className:"text-sm text-blue-700",children:"Dokumen ini diupload melalui Silver App menggunakan Supabase Storage"})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[[...y,...v,...N].filter(e=>e.proof_url||e.is_uploaded).map((e,a)=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 hover:shadow-md transition-shadow bg-white",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-blue-600 text-lg",children:"üìé"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.description||`Task ${a+1}`}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsxs)("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded",children:[e.plan_progress?`Target: ${Z(e.plan_progress).toFixed(1)}%`:"",e.actual_progress?`Realisasi: ${Z(e.actual_progress).toFixed(1)}%`:""]}),(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded ${e.is_uploaded?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:e.is_uploaded?"‚úÖ Supabase":"üìé Single"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("a",{href:e.proof_url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white text-center py-2 px-3 rounded text-sm",children:"Lihat Dokumen"}),(0,t.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e.proof_url),alert("Link dokumen berhasil disalin!")},className:"bg-gray-100 hover:bg-gray-200 text-gray-800 py-2 px-3 rounded text-sm",title:"Salin link",children:"üìã"})]}),e.location&&(0,t.jsxs)("div",{className:"mt-2 text-xs text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Lokasi:"})," ",e.location]})]},e.id||a)),0===[...y,...v,...N].filter(e=>e.proof_url||e.is_uploaded).length&&(0,t.jsxs)("div",{className:"col-span-full text-center py-12 text-gray-500",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"üìé"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"Belum ada dokumen yang diupload"}),(0,t.jsx)("p",{className:"text-sm mt-2",children:"Tim lapangan belum mengupload dokumen melalui Silver App"}),(0,t.jsx)("button",{onClick:()=>window.open(`/silver/${h}`,"_blank"),className:"mt-4 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded text-sm",children:"Buka Silver App untuk Upload"})]})]}),[...y,...v,...N].filter(e=>e.proof_url||e.is_uploaded).length>0&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-gray-50 rounded border",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"üìä Statistik Upload"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"p-2 bg-white rounded border",children:[(0,t.jsx)("div",{className:"font-medium",children:"Total Upload"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:[...y,...v,...N].filter(e=>e.proof_url||e.is_uploaded).length})]}),(0,t.jsxs)("div",{className:"p-2 bg-white rounded border",children:[(0,t.jsx)("div",{className:"font-medium",children:"Supabase Storage"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:[...y,...v,...N].filter(e=>e.is_uploaded).length})]}),(0,t.jsxs)("div",{className:"p-2 bg-white rounded border",children:[(0,t.jsx)("div",{className:"font-medium",children:"Persentase Upload"}),(0,t.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[([...y,...v,...N].filter(e=>e.proof_url||e.is_uploaded).length/[...y,...v,...N].length*100||0).toFixed(1),"%"]})]})]})]})]}),"notes"===I&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4",children:"Tambah Catatan (Master)"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("textarea",{value:_,onChange:e=>C(e.target.value),placeholder:"Tulis catatan penting untuk proyek ini...",className:"w-full h-32 p-3 border rounded-lg resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tambah Voice Note (Opsional)"}),(0,t.jsx)("input",{type:"file",accept:"audio/*",onChange:e=>L(e.target.files?.[0]||null),className:"w-full"})]}),(0,t.jsx)("button",{onClick:ed,disabled:!_.trim(),className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-2 rounded-lg font-medium mt-6",children:"Simpan Catatan"})]}),R&&(0,t.jsxs)("p",{className:"text-sm text-green-600",children:["‚úÖ File audio siap diupload ke Supabase Storage: ",R.name]})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"Catatan Proyek"}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: ",S.length," catatan"]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[S.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:new Date(e.created_at).toLocaleString("id-ID")}),(0,t.jsx)("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-800 rounded",children:e.created_by})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:new Date(e.updated_at).toLocaleTimeString("id-ID")})]}),(0,t.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:e.content}),e.audio_url&&(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Voice Note:"}),(0,t.jsx)("a",{href:e.audio_url,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800",children:"Download Audio"})]}),(0,t.jsxs)("audio",{controls:!0,className:"w-full",children:[(0,t.jsx)("source",{src:e.audio_url,type:"audio/mpeg"}),"Browser Anda tidak mendukung pemutar audio."]})]})]},e.id)),0===S.length&&(0,t.jsxs)("div",{className:"text-center py-12 text-gray-500",children:[(0,t.jsx)("div",{className:"text-6xl mb-4",children:"üìù"}),(0,t.jsx)("p",{className:"text-lg font-medium",children:"Belum ada catatan"}),(0,t.jsx)("p",{className:"text-sm mt-2",children:"Tambahkan catatan pertama untuk proyek ini"})]})]})]})]}),(0,t.jsx)("div",{className:"mt-8 bg-white p-6 rounded-lg shadow",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("strong",{className:"text-blue-800",children:"KETERANGAN MASTER DASHBOARD:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside mt-2 text-gray-700 space-y-1",children:[(0,t.jsx)("li",{children:"Dashboard monitoring ini menampilkan data real-time dari tim lapangan melalui Silver App"}),(0,t.jsx)("li",{children:"Semua data tersinkronisasi otomatis dengan localStorage Silver App"}),(0,t.jsx)("li",{children:"Supabase Storage memastikan keamanan dokumen"}),(0,t.jsx)("li",{children:"Progress dihitung secara kumulatif sesuai implementasi Silver App"})]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-blue-800 font-semibold mb-2",children:"STATUS SINKRONISASI"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Silver App Data:"}),(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:"‚úÖ TERSINKRON"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Database Real-time:"}),(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded text-xs",children:"‚úÖ AKTIF"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"User Online:"}),(0,t.jsxs)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs",children:["üë• ",$.length," USERS"]})]})]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mt-4 font-semibold text-blue-800",children:"Disetujui oleh:"}),(0,t.jsx)("div",{className:"mt-10 underline font-medium",children:"Rudi Winarto"}),(0,t.jsx)("div",{className:"text-gray-600",children:"PT Elektrindo Utama Indonesia"}),(0,t.jsxs)("div",{className:"mt-6 text-xs text-gray-500",children:["Master Dashboard v2.0",(0,t.jsx)("br",{}),"Terintegrasi dengan Silver App"]})]})]})})]})}e.s(["default",()=>tT],89963)}]);